(this.webpackJsonpdoweb_client=this.webpackJsonpdoweb_client||[]).push([[0],{116:function(e,t,a){},303:function(e,t,a){e.exports=a(573)},336:function(e,t,a){},417:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},569:function(e,t,a){},572:function(e,t,a){},573:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),i=a.n(l),c=(a(230),a(112),a(60)),s=a(301),o=a(4),u=a(5),m=a(7),d=a(6),p=a(8),h=a(3),v=a.n(h),E=a(30),f=a(111),g=(a(97),a(46)),_=(a(98),a(28)),b=(a(239),a(191)),y=(a(59),a(31)),k=(a(160),a(23)),w=(a(120),a(47)),O=(a(240),a(186)),j=(a(161),a(107)),S=(a(36),a(9)),x=(a(142),a(22)),C=(a(63),a(20)),I=(a(336),a(574)),N=a(575),F=w.a.Header,T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={username:"",ifadmin:"0"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"logout",value:function(){v.a.post("/api",{api:"logout"}).then((function(e){window.location.reload(),C.a.info("\u767b\u51fa\u6210\u529f\uff01")}))}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"check_login"}).then((function(t){e.setState({username:t.data.username,ifadmin:t.data.ifadmin})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.ifadmin;return r.a.createElement(F,{className:"header"},r.a.createElement("div",{className:"logo"}),r.a.createElement(g.a,{justify:"space-between"},r.a.createElement(_.a,null,r.a.createElement(x.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[this.props.number],style:{lineHeight:"64px"}},r.a.createElement(x.a.Item,{key:"1"},r.a.createElement(E.b,{to:"/"},"\u529f\u80fd\u64cd\u4f5c")),r.a.createElement(x.a.Item,{key:"2"},r.a.createElement(E.b,{to:"/user"},"\u7528\u6237\u7ba1\u7406")))),r.a.createElement(_.a,null,r.a.createElement("div",{align:"right"},r.a.createElement(j.a,{overlay:r.a.createElement(x.a,null,r.a.createElement(x.a.Item,null,"\u8eab\u4efd: ","100"===n?"\u7ba1\u7406\u5458":"\u666e\u901a\u7528\u6237"),r.a.createElement(x.a.Divider,null),r.a.createElement(x.a.Item,null,r.a.createElement("div",{align:"center",onClick:function(){return e.logout()}},"\u767b\u51fa")))},r.a.createElement(S.a,{size:"large",type:"link"},a," ",r.a.createElement(I.a,null))),r.a.createElement(O.a,{icon:r.a.createElement(N.a,null)})))))}}]),t}(r.a.Component),P=(a(57),a(38)),R=(a(128),a(73)),K=(a(113),a(41)),D=(a(145),a(69)),z=(a(417),a(584)),H=(a(214),a(138)),M=(a(168),a(56)),L=(a(64),a(14)),B=a(24),V=a.n(B),A=(a(80),a(35)),U=a(43),G=a(576),Y=a(577),J=a(578),W=a(579),q=a(580),Q=a(581),X=a(582),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.submit_input()},a.handleCancel=function(){a.setState({visible:!1})},a.handleInput_server_type=function(e){a.setState({input_server_type:e.target.value})},a.handleInput_server_ip=function(e){a.setState({input_server_ip:e.target.value})},a.handleInput_server_name=function(e){a.setState({input_server_name:e.target.value})},a.handleInput_server_sship=function(e){a.setState({input_server_ssh_ip:e.target.value})},a.state={loading:!1,visible:!1,input_server_ip:"",input_server_name:"",input_server_type:"http",server_user_input:"root",server_psw_input:"",input_server_ssh_ip:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"submit_input",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t,a,n,l,i,c,s,o=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.input_server_type,n=t.input_server_name,l=t.input_server_ip,i=t.server_user_input,c=t.server_psw_input,s=t.input_server_ssh_ip,this.setState({loading:!0}),e.next=4,v.a.post("/api",{api:"server_add",server_ip:l,server_name:n,server_type:a,server_ssh_ip:s,server_user:i,server_psw:c}).then((function(e){o.setState({loading:!1,input_server_ip:"",input_server_name:"",input_server_type:"http",server_user_input:"root",server_psw_input:"",input_server_ssh_ip:"",visible:!1}),A.a.open({message:"\u521b\u5efa\u6210\u529f\uff01",description:"\u8282\u70b9:".concat(n,"\u521b\u5efa\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 4:this.props.onFresh();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleServer_user_input",value:function(e){this.setState({server_user_input:e.target.value})}},{key:"handleServer_psw_input",value:function(e){this.setState({server_psw_input:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.visible,l=t.input_server_type,i=t.input_server_name,c=t.input_server_ip,s=t.server_user_input,o=t.server_psw_input,u=t.input_server_ssh_ip;return r.a.createElement("div",null,r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(Y.a,null),onClick:this.showModal},"\u6dfb\u52a0\u65b0\u7684\u670d\u52a1\u5668\u8282\u70b9"),r.a.createElement(H.a,{visible:n,title:"\u6dfb\u52a0\u670d\u52a1\u5668",onOk:this.handleOk,onCancel:this.handleCancel,footer:[r.a.createElement(S.a,{key:"back",onClick:this.handleCancel},"\u8fd4\u56de"),r.a.createElement(S.a,{key:"submit",type:"primary",loading:a,onClick:this.handleOk},"\u63d0\u4ea4")]},r.a.createElement(L.a.Group,null,"\u670d\u52a1\u5668ip\u6216\u57df\u540d:",r.a.createElement(L.a,{value:c,onChange:this.handleInput_server_ip,prefix:r.a.createElement(J.a,null),placeholder:"127.0.0.1"}),"\u670d\u52a1\u5668\u540d\u5b57:",r.a.createElement(L.a,{value:i,onChange:this.handleInput_server_name,prefix:r.a.createElement(W.a,null),placeholder:"lalala"})),r.a.createElement("br",null),"\u8fde\u63a5\u7c7b\u578b:",r.a.createElement(M.a.Group,{onChange:this.handleInput_server_type,defaultValue:l,buttonStyle:"solid"},r.a.createElement(M.a.Button,{value:"http"},"HTTP"),r.a.createElement(M.a.Button,{value:"https"},"HTTPS")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(L.a.Group,null,"ssh\u670d\u52a1IP:",r.a.createElement(L.a,{onChange:function(t){return e.handleInput_server_sship(t)},value:u,style:{width:280,marginLeft:10},prefix:r.a.createElement(q.a,null),placeholder:"127.0.0.1:22"}),r.a.createElement("br",null),r.a.createElement("br",null),"\u670d\u52a1\u5668\u7528\u6237\u540d:",r.a.createElement(L.a,{onChange:function(t){return e.handleServer_user_input(t)},value:s,style:{width:280,marginLeft:10},prefix:r.a.createElement(Q.a,null),placeholder:"root"}),r.a.createElement("br",null),r.a.createElement("br",null),"\u670d\u52a1\u5668\u5bc6\u7801:",r.a.createElement(L.a,{onChange:function(t){return e.handleServer_psw_input(t)},value:o,style:{width:300,marginLeft:5},prefix:r.a.createElement(X.a,null),placeholder:"******"}))))}}]),t}(r.a.Component),$=(a(220),a(135)),ee=a(583),te=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"delete_server",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,v.a.post("/api",{api:"server_delete",server_id:this.props.server_id}).then((function(e){t.setState({loading:!1}),A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u8282\u70b9:".concat(t.props.server_id,"\u5220\u9664\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 3:this.props.onFresh();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(K.a,{placement:"top",title:"\u5220\u9664\u8be5\u670d\u52a1\u5668"},r.a.createElement($.a,{disabled:this.props.disabled,placement:"right",title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8282\u70b9\u5417",onConfirm:function(){return e.delete_server()},okText:"\u662f",cancelText:"\u5426"},r.a.createElement(S.a,{type:"primary",shape:"circle",icon:r.a.createElement(ee.a,null),danger:!0,disabled:this.props.disabled})))}}]),t}(r.a.Component),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={data:[],loading:!0},a.columns=[{title:"\u8282\u70b9\u540d\u5b57",dataIndex:"server_name",key:"name"},{title:"\u8282\u70b9ip",dataIndex:"server_ip",key:"age"},{title:"\u72b6\u6001",key:"server_status",render:function(e,t){return 0===t.server_status?r.a.createElement(D.a,{color:"green"},"\u5728\u7ebf"):r.a.createElement(D.a,{color:"red"},"\u79bb\u7ebf")}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return 0===t.server_status?r.a.createElement("div",null,r.a.createElement("span",{style:{marginRight:8}},r.a.createElement(K.a,{placement:"top",title:"\u8fdb\u5165\u8be5\u670d\u52a1\u5668"},r.a.createElement(E.b,{to:"".concat(a.props.url,"control/").concat(t.id)},r.a.createElement(S.a,{type:"primary",shape:"circle",icon:r.a.createElement(z.a,null)})))),r.a.createElement("span",{style:{marginRight:8}},r.a.createElement(te,{server_id:t.id,onFresh:function(){return a.handleRefresh()}}))):r.a.createElement("div",null,r.a.createElement("span",{style:{marginRight:8}},r.a.createElement(K.a,{placement:"top",title:"\u8fdb\u5165\u8be5\u670d\u52a1\u5668"},r.a.createElement(E.b,{to:"".concat(a.props.url,"control/").concat(t.id)},r.a.createElement(S.a,{type:"primary",shape:"circle",icon:r.a.createElement(z.a,null),disabled:!0})))),r.a.createElement("span",{style:{marginRight:8}},r.a.createElement(te,{server_id:t.id,onFresh:function(){return a.handleRefresh()},disabled:!0})))}}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"handleRefresh",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"server_info"}).then((function(t){e.setState({data:t.data.data,loading:!1});for(var a=function(a){v.a.post("/api",{api:"server_check",server_id:t.data.data[a].id}).then((function(t){var n=e.state.data;n[a].server_status=t.data.status,e.setState({data:n})}))},n=0;n<t.data.data.length;n++)a(n)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u670d\u52a1\u5668\u4e00\u89c8",extra:r.a.createElement(Z,{onFresh:function(){return e.handleRefresh()}})},r.a.createElement(R.a,{loading:n,rowKey:function(e){return e.id},columns:this.columns,dataSource:a,size:"middle"})))}}]),t}(r.a.Component);function ne(){var e=Object(f.h)().url;return r.a.createElement(ae,{url:e})}a(463);var re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=w.a.Header,t=w.a.Content,a=w.a.Footer;return r.a.createElement(w.a,{className:"layout"},r.a.createElement(e,null,r.a.createElement(T,{number:"1"})),r.a.createElement(t,{style:{padding:"0 50px"},className:"site-layout-background"},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875")),r.a.createElement(y.a,{orientation:"left"},"\u7cfb\u7edf\u516c\u544a"),r.a.createElement(g.a,{justify:"center",gutter:[16,16]},r.a.createElement(_.a,{span:24},r.a.createElement(b.a,{message:"\u6b22\u8fce\u6765\u5230Docker\u5bb9\u5668\u53ef\u89c6\u5316\u5e73\u53f0",description:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u670d\u52a1\u5668\u6765\u8fdb\u884c\u64cd\u4f5c\u3002\u60a8\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u65b0\u7684\u670d\u52a1\u5668\u6216\u8005\u5220\u9664\u4e00\u4e2a\u670d\u52a1\u5668",type:"info",showIcon:!0}))),r.a.createElement(y.a,{orientation:"left"},"\u8fdb\u5165\u670d\u52a1\u5668"),r.a.createElement(ne,null),r.a.createElement(y.a,null)),r.a.createElement(a,{style:{textAlign:"center"}},"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"))}}]),t}(r.a.Component),le=(a(464),a(585)),ie=a(586),ce=a(587),se=a(588),oe=a(589),ue=a(590),me=a(591),de=x.a.SubMenu,pe=w.a.Sider,he=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onOpenChange=function(e){var t=e.find((function(e){return-1===a.state.openKeys.indexOf(e)}));-1===a.rootSubmenuKeys.indexOf(t)?a.setState({openKeys:e}):a.setState({openKeys:t?[t]:[]})},a.rootSubmenuKeys=["sub1","sub2","sub3","sub4","sub5"],a.state={openKeys:[a.props.openKey],openOptions:[a.props.selectOptins]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(pe,{width:200,className:"site-layout-background"},r.a.createElement(x.a,{mode:"inline",defaultSelectedKeys:this.state.openOptions,onOpenChange:this.onOpenChange,style:{width:200},defaultOpenKeys:["sub1","sub2","sub3","sub4","sub5","sub6"]},r.a.createElement(x.a.Item,{key:"back"},r.a.createElement(le.a,{style:{fontSize:"21px"}}),r.a.createElement(E.b,{to:"/"},"\u56de\u5230\u4e3b\u9875")),r.a.createElement(x.a.Item,{key:"0"},r.a.createElement(ie.a,{style:{fontSize:"21px"}}),r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id)},"\u5168\u5c40\u603b\u89c8")),r.a.createElement(de,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(ce.a,{style:{fontSize:"21px"}}),r.a.createElement("span",null,"\u670d\u52a1\u5668\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"1"},r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id,"/serverinfo")},"\u670d\u52a1\u5668\u603b\u89c8")),r.a.createElement(x.a.Item,{key:"2"},r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id,"/server_secret")},"\u670d\u52a1\u5668\u5bc6\u94a5\u7ba1\u7406"))),r.a.createElement(de,{key:"sub2",title:r.a.createElement("span",null,r.a.createElement(se.a,{style:{fontSize:"21px"}}),r.a.createElement("span",null,"\u5bb9\u5668\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"5"},r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id,"/containerinfo")},"\u5bb9\u5668\u603b\u89c8"))),r.a.createElement(de,{key:"sub4",title:r.a.createElement("span",null,r.a.createElement(oe.a,{style:{fontSize:"21px"}}),r.a.createElement("span",null,"\u955c\u50cf\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"9"},r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id,"/image")},"\u955c\u50cf\u5217\u8868"))),r.a.createElement(de,{key:"sub5",title:r.a.createElement("span",null,r.a.createElement(ue.a,{style:{fontSize:"21px"}}),r.a.createElement("span",null,"\u7f51\u7edc\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"10"},r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id,"/network")},"\u7f51\u5361\u4e00\u89c8"))),r.a.createElement(de,{key:"sub6",title:r.a.createElement("span",null,r.a.createElement(me.a,{style:{fontSize:"21px"}}),r.a.createElement("span",null,"\u5377\u7ba1\u7406"))},r.a.createElement(x.a.Item,{key:"11"},r.a.createElement(E.b,{to:"/control/".concat(this.props.server_id,"/volume")},"\u5377\u4e00\u89c8")))))}}]),t}(r.a.Component);function ve(e){var t=Object(f.g)().server_id;return r.a.createElement(he,{server_id:t,openKey:e.openKey,selectOptins:e.selectOptins})}a(148);var Ee=a(68),fe=(a(71),a(42));function ge(){var e=Object(f.g)().id;return r.a.createElement(fe.a,{ghost:!1,onBack:function(){return window.history.back()},title:"\u5bb9\u5668\u8be6\u60c5",subTitle:"\u5bb9\u5668:".concat(e)})}var _e=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0,data:""},a.get_args(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"get_args",value:function(){var e=this;v.a.post("/api",{api:"one_container_info",id:this.props.id}).then((function(t){e.setState({loading:!1,data:t.data})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ge,null),r.a.createElement(Ee.a,{active:!0,loading:this.state.loading},this.state.data.data))}}]),t}(r.a.Component);function be(){var e=Object(f.g)(),t=e.server_id,a=e.id;return r.a.createElement(_e,{server_id:t,id:a})}var ye=a(189),ke=a.n(ye),we=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).menu=r.a.createElement(x.a,{onClick:function(e){return a.handleMenuClick(e)}},r.a.createElement(x.a.Item,{key:"0"},r.a.createElement(E.b,{to:"".concat(a.props.url,"/create")},"\u521b\u5efa\u65b0\u5bb9\u5668")),r.a.createElement(x.a.Item,{key:"1"},"\u91cd\u542f\u9009\u4e2d\u5bb9\u5668"),r.a.createElement(x.a.Item,{key:"2"},"\u505c\u6b62\u9009\u4e2d\u5bb9\u5668"),r.a.createElement(x.a.Item,{key:"3"},"\u5220\u9664\u9009\u4e2d\u5bb9\u5668"),r.a.createElement(x.a.Item,{key:"4"},"\u5220\u9664\u5df2\u505c\u6b62\u5bb9\u5668")),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleMenuClick",value:function(){var e=Object(U.a)(V.a.mark((function e(t){var a,n,l,i,c,s,o=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.onLoading(),"4"!==t.key){e.next=8;break}return e.next=4,v.a.post("/api",{api:"container_delete_stoped",server_id:this.props.server_id}).then((function(e){console.log(e.data),A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u5bb9\u5668\u5220\u9664\u6210\u529f\uff01",icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 4:return this.props.onFresh(),e.abrupt("return");case 8:if("0"!==t.key){e.next=11;break}return this.props.onFresh(),e.abrupt("return");case 11:if(0!==this.props.selected.length){e.next=15;break}return C.a.error("\u60a8\u6ca1\u6709\u9009\u4e2d\u4efb\u4f55\u5bb9\u5668"),this.props.onFresh(),e.abrupt("return");case 15:if("1"!==t.key){e.next=25;break}a=V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api",{api:"container_restart",server_id:o.props.server_id,container_id:o.props.selected[t]}).then((function(e){console.log(e.data),A.a.open({message:"\u91cd\u542f\u6210\u529f\uff01",description:"\u5bb9\u5668:".concat(o.props.selected[t],"\u91cd\u542f\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 2:case"end":return e.stop()}}),e)})),n=0;case 18:if(!(n<this.props.selected.length)){e.next=23;break}return e.delegateYield(a(n),"t0",20);case 20:n++,e.next=18;break;case 23:e.next=43;break;case 25:if("2"!==t.key){e.next=35;break}l=V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api",{api:"container_stop",server_id:o.props.server_id,container_id:o.props.selected[t]}).then((function(e){console.log(e.data),A.a.open({message:"\u505c\u6b62\u6210\u529f\uff01",description:"\u5bb9\u5668:".concat(o.props.selected[t],"\u505c\u6b62\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 2:case"end":return e.stop()}}),e)})),i=0;case 28:if(!(i<this.props.selected.length)){e.next=33;break}return e.delegateYield(l(i),"t1",30);case 30:i++,e.next=28;break;case 33:e.next=43;break;case 35:if("3"!==t.key){e.next=43;break}c=V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api",{api:"container_delete",server_id:o.props.server_id,container_id:o.props.selected[t]}).then((function(e){console.log(e.data),A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u5bb9\u5668:".concat(o.props.selected[t],"\u5220\u9664\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 2:case"end":return e.stop()}}),e)})),s=0;case 38:if(!(s<this.props.selected.length)){e.next=43;break}return e.delegateYield(c(s),"t2",40);case 40:s++,e.next=38;break;case 43:this.props.onFresh();case 44:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j.a,{overlay:this.menu},r.a.createElement(S.a,{disabled:this.props.disabled,loading:this.props.loading},"\u5feb\u6377\u64cd\u4f5c ",r.a.createElement(I.a,null))))}}]),t}(r.a.Component),Oe=(a(216),a(96)),je=(a(472),a(229)),Se=(a(149),a(17)),xe=a(592),Ce=a(593),Ie=a(594),Ne=a(595),Fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0}),a.fetch()},a.onClose=function(){a.setState({visible:!1})},a.state={visible:!1,loading:!1,data:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"container_inspect",server_id:this.props.server_id,container_id:this.props.container_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data})}))}},{key:"handleStart",value:function(){var e=this;this.setState({loading:!0}),v.a.post("/api",{api:"container_start",server_id:this.props.server_id,container_id:this.props.container_id}).then((function(t){console.log(t.data.data),e.setState({loading:!1}),C.a.success("\u5df2\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42"),e.fetch(),e.props.onFresh()}))}},{key:"handleRestart",value:function(){var e=this;this.setState({loading:!0}),v.a.post("/api",{api:"container_restart",server_id:this.props.server_id,container_id:this.props.container_id}).then((function(t){console.log(t.data.data),e.setState({loading:!1}),C.a.success("\u5df2\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42"),e.fetch(),e.props.onFresh()}))}},{key:"handleStop",value:function(){var e=this;this.setState({loading:!0}),v.a.post("/api",{api:"container_stop",server_id:this.props.server_id,container_id:this.props.container_id}).then((function(t){console.log(t.data.data),e.setState({loading:!1}),C.a.success("\u5df2\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42"),e.fetch(),e.props.onFresh()}))}},{key:"handelGotoTerminal",value:function(){var e=this;this.setState({loading:!0}),v.a.post("/api",{api:"server_ssh_info",server_id:this.props.server_id,base64:!0}).then((function(t){console.log(t.data.data);var a=t.data.data.ip,n=t.data.data.user,r=t.data.data.psw;window.location.replace("/ssh?hostname=".concat(a,"&username=").concat(n,"&password=").concat(r,"&command=docker exec -it ").concat(e.props.container_id," /bin/bash"))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading;if(a.NetworkSettings){var l=Object.keys(a.NetworkSettings.Networks)[0];return r.a.createElement("div",null,r.a.createElement(K.a,{placement:"top",title:"\u67e5\u770b\u8be5\u5bb9\u5668"},r.a.createElement(S.a,{type:"primary",shape:"circle",icon:r.a.createElement(ie.a,null),onClick:this.showDrawer})),r.a.createElement(Oe.a,{title:"\u5bb9\u5668\u4fe1\u606f",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:720},r.a.createElement(Se.a,{title:"\u57fa\u672c\u4fe1\u606f",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},r.a.createElement(Se.a.Item,{span:2,label:"ID"},a.Id?a.Id:""),r.a.createElement(Se.a.Item,{label:"\u540d\u5b57"}," ",a.Name?a.Name:""," "),r.a.createElement(Se.a.Item,{label:"\u7f51\u7edc\u4fe1\u606f"},"".concat(a.NetworkSettings.Networks["".concat(l)].IPAddress,"(").concat(l,")")),r.a.createElement(Se.a.Item,{label:"\u72b6\u6001"},a.State?"running"===a.State.Status?r.a.createElement(je.a,{status:"processing",text:a.State.Status}):r.a.createElement(je.a,{status:"error",text:a.State.Status}):""),r.a.createElement(Se.a.Item,{label:"\u521b\u5efa\u65f6\u95f4"}," ",a.Created.split(".")[0]," "),r.a.createElement(Se.a.Item,{span:2,label:"\u64cd\u4f5c"},r.a.createElement(K.a,{placement:"top",title:"\u542f\u52a8\u5bb9\u5668"},r.a.createElement(S.a,{loading:n,type:"primary",shape:"circle",icon:r.a.createElement(xe.a,null),size:"large",onClick:function(){return e.handleStart()}})),r.a.createElement(K.a,{placement:"top",title:"\u91cd\u542f\u5bb9\u5668"},r.a.createElement(S.a,{loading:n,style:{marginLeft:12},type:"primary",shape:"circle",icon:r.a.createElement(Ce.a,null),size:"large",onClick:function(){return e.handleRestart()}})),r.a.createElement(K.a,{placement:"top",title:"\u7ed3\u675f\u5bb9\u5668"},r.a.createElement(S.a,{loading:n,style:{marginLeft:12},type:"primary",shape:"circle",icon:r.a.createElement(Ie.a,null),size:"large",danger:!0,onClick:function(){return e.handleStop()}})),r.a.createElement(K.a,{placement:"top",title:"\u542f\u52a8\u7ec8\u7aef"},"running"===a.State.Status?r.a.createElement(S.a,{loading:n,style:{marginLeft:12},type:"primary",shape:"circle",icon:r.a.createElement(Ne.a,null),size:"large",onClick:function(){return e.handelGotoTerminal()}}):r.a.createElement(S.a,{loading:n,style:{marginLeft:12},type:"primary",shape:"circle",icon:r.a.createElement(Ne.a,null),size:"large",disabled:!0})))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Se.a,{title:"\u8be6\u7ec6\u53c2\u6570",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},r.a.createElement(Se.a.Item,{span:2,label:"\u955c\u50cf"},a.Config.Image),r.a.createElement(Se.a.Item,{label:"\u7aef\u53e3\u6620\u5c04\u4fe1\u606f"},a.NetworkSettings.Ports?Object.keys(a.NetworkSettings.Ports).map((function(e,t){return a.NetworkSettings.Ports["".concat(e)]?a.NetworkSettings.Ports["".concat(e)].map((function(t,a){return r.a.createElement("div",null,"".concat(t.HostIp,":").concat(t.HostPort," => ").concat(e),r.a.createElement("br",null),r.a.createElement("br",null))})):e})):""),r.a.createElement(Se.a.Item,{label:"\u542f\u52a8\u53c2\u6570"},a.Config.Cmd?a.Config.Cmd.map((function(e,t){return e})):""),r.a.createElement(Se.a.Item,{span:2,label:"\u73af\u5883\u53d8\u91cf"},a.Config.Env.map((function(e,t){return r.a.createElement("div",null,e,r.a.createElement("br",null),r.a.createElement("br",null))}))))))}return r.a.createElement("div",null,r.a.createElement(K.a,{placement:"top",title:"\u67e5\u770b\u8be5\u5bb9\u5668"},r.a.createElement(S.a,{type:"primary",shape:"circle",icon:r.a.createElement(ie.a,null),onClick:this.showDrawer})),r.a.createElement(Oe.a,{title:"\u5bb9\u5668\u4fe1\u606f",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:720},r.a.createElement(Ee.a,{active:!0}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Ee.a,{active:!0})))}}]),t}(r.a.Component);function Te(){var e=Object(f.g)().server_id;return r.a.createElement(fe.a,{ghost:!1,title:"\u5bb9\u5668\u8be6\u60c5",subTitle:"\u670d\u52a1\u5668:".concat(e)})}function Pe(e){var t=Object(f.g)().server_id;return r.a.createElement(Fe,{server_id:t,container_id:e.container_id,onFresh:function(){return e.onFresh()}})}var Re=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.state={data:[],loading:!0,selectedRowKeys:[]},a.columns=[{title:"\u540d\u5b57",dataIndex:"Names",key:"name"},{title:"\u5bf9\u5e94\u955c\u50cf",key:"image",render:function(e,t){return t.Image}},{title:"\u5bb9\u5668ip",key:"ip",render:function(e,t){return a.show_ip(e,t)}},{title:"\u72b6\u6001",key:"stauts",render:function(e,t){return"running"===t.State?r.a.createElement(D.a,{color:"cyan"},t.State):r.a.createElement(D.a,{color:"red"},t.State)}},{title:"\u521b\u5efa\u65f6\u95f4",key:"time",render:function(e,t){return ke()(1e3*t.Created).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(Pe,{container_id:t.Id,onFresh:function(){return a.handleRefresh()}}))}}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"handleRefresh",value:function(){this.fetch(),this.setState({selectedRowKeys:[],loading:!1})}},{key:"handleLoading",value:function(){this.setState({loading:!0})}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"container_info",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data,loading:!1})}))}},{key:"show_ip",value:function(e,t){var a=Object.keys(t.NetworkSettings.Networks)[0];return t.NetworkSettings.Networks[a].IPAddress}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading,l=t.selectedRowKeys,i={selectedRowKeys:l,onChange:this.onSelectChange},c=l.length>0;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u5bb9\u5668\u4e00\u89c8",extra:r.a.createElement(we,{disabled:!c,loading:n,server_id:this.props.server_id,url:this.props.url,selected:l,onFresh:function(){return e.handleRefresh()},onLoading:function(){return e.handleLoading()}})},r.a.createElement(R.a,{loading:n,rowSelection:i,rowKey:function(e){return e.Id},columns:this.columns,dataSource:a,size:"middle"})))}}]),t}(r.a.Component);function Ke(){var e=Object(f.g)().server_id,t=Object(f.h)().url;return r.a.createElement("div",null,r.a.createElement(Te,null),r.a.createElement(Re,{server_id:e,url:t}))}a(475);var De=a(228),ze=(a(477),a(226)),He=(a(126),a(12)),Me=a(74),Le=a(61),Be=(a(256),a(141)),Ve=a(597),Ae=a(598),Ue=a(599),Ge=a(600),Ye=(a(102),a(39)),Je=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={disabled:!1,items:[],server_id:a.props.server_id},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(e){this.get_image_list()}},{key:"get_image_list",value:function(){var e=this;this.setState({items:[],disabled:!0});var t=this.state.server_id;v.a.post("/api",{api:"image_info",server_id:t}).then((function(t){console.log(t.data.data.data),e.setState({items:t.data.data.data})})),this.setState({disabled:!1})}},{key:"handleValue",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.disabled,l=Ye.a.Option;return r.a.createElement(Ye.a,{style:{width:"450px"},labelInValue:!0,notFoundContent:r.a.createElement(c.a,{size:"small"}),placeholder:"\u67e5\u770b\u955c\u50cf\u5217\u8868",disabled:!!n,onChange:function(t){return e.handleValue(t)},dropdownRender:function(e){return r.a.createElement("div",null,e)}},a.map((function(e){return r.a.createElement(l,{key:e.Id},e.RepoTags)})))}}]),t}(r.a.Component),We=a(596),qe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],items_value:{},input_key:"",input_value:"",selected:[]},a.onKeyChange=function(e){a.setState({input_key:e.target.value})},a.onValueChange=function(e){a.setState({input_value:e.target.value})},a.addItem=function(){var e=a.state,t=e.items,n=e.input_value,r=e.input_key;a.setState({items:[].concat(Object(Me.a)(t),['{"'.concat(r,'":"').concat(n,'"}')]),input_key:"",input_value:""})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.input_key,l=t.input_value,i=Ye.a.Option;return r.a.createElement(Ye.a,{mode:"multiple",style:{width:"600px"},placeholder:this.props.args,onChange:function(t){return e.props.onChange(t)},dropdownRender:function(t){return r.a.createElement("div",null,t,r.a.createElement(y.a,{style:{margin:"4px 0"},orientation:"left"},"\u9009\u9879\u6dfb\u52a0"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(L.a,{addonBefore:"key",style:{flex:"auto"},value:n,onChange:e.onKeyChange}),":",r.a.createElement(L.a,{addonBefore:"value",style:{flex:"auto"},value:l,onChange:e.onValueChange})),r.a.createElement("div",{align:"right"},r.a.createElement(S.a,{type:"link",style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:e.addItem},r.a.createElement(We.a,null)," \u6dfb\u52a0\u9009\u9879")))}},a.map((function(e){return r.a.createElement(i,{key:e},e)})))}}]),t}(r.a.Component),Qe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={disabled:!1,items:[],server_id:a.props.server_id},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(e){this.get_image_list()}},{key:"get_image_list",value:function(){var e=this;this.setState({items:[],disabled:!0});var t=this.state.server_id;v.a.post("/api",{api:"network_info",server_id:t}).then((function(t){console.log(t.data.data.data),e.setState({items:t.data.data.data})})),this.setState({disabled:!1})}},{key:"handleValue",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.disabled,l=Ye.a.Option;return r.a.createElement(Ye.a,{style:{width:"450px"},labelInValue:!0,notFoundContent:r.a.createElement(c.a,{size:"small"}),placeholder:"\u67e5\u770b\u955c\u50cf\u5217\u8868",disabled:!!n,onChange:function(t){return e.handleValue(t)},dropdownRender:function(e){return r.a.createElement("div",null,e)}},a.map((function(e){return r.a.createElement(l,{key:e.Id},e.Name)})))}}]),t}(r.a.Component),Xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onCportChange=function(e){a.setState({input_cport:e.target.value})},a.onHipChange=function(e){a.setState({input_hip:e.target.value})},a.onHportChange=function(e){a.setState({input_hport:e.target.value})},a.onTypeChange=function(e){a.setState({input_type:e.target.value})},a.onSelectedChange=function(e){for(var t=[],n=0;n<e.length;n++){var r=Object.keys(JSON.parse(e[n]))[0];t=[].concat(Object(Me.a)(t),['{"'.concat(r,'":{}}')])}a.props.onChange(e,t)},a.addItem=function(){var e=a.state,t=e.items,n=e.input_cport,r=e.input_type,l=e.input_hip,i=e.input_hport;a.setState({items:[].concat(Object(Me.a)(t),['{"'.concat(n,"/").concat(r,'":[{"HostIp":"').concat(l,'","HostPort":"').concat(i,'"}]}')]),input_cport:"",input_type:"tcp",input_hip:"0.0.0.0",input_hport:""})},a.state={items:[],items_value:{},items2:[],input_cport:"",input_type:"tcp",input_hip:"0.0.0.0",input_hport:"",selected:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.input_cport,l=t.input_type,i=t.input_hip,c=t.input_hport,s=Ye.a.Option;return r.a.createElement(Ye.a,{mode:"multiple",style:{width:"320px"},placeholder:this.props.args,onChange:this.onSelectedChange,dropdownRender:function(t){return r.a.createElement("div",null,t,r.a.createElement(y.a,{style:{margin:"4px 0"},orientation:"left"},"\u9009\u9879\u6dfb\u52a0"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},"\u5bb9\u5668\u7aef\u53e3:"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(L.a,{value:n,placeholder:"443",onChange:e.onCportChange})),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},"\u8f6c\u53d1\u7c7b\u578b:"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(M.a.Group,{value:l,buttonStyle:"solid",onChange:e.onTypeChange},r.a.createElement(M.a.Button,{value:"tcp"},"TCP"),r.a.createElement(M.a.Button,{value:"udp"},"UDP"))),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},"\u4e3b\u673aIP:"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(L.a,{value:i,placeholder:"0.0.0.0",style:{flex:"auto"},onChange:e.onHipChange})),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},"\u4e3b\u673a\u7aef\u53e3:"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(L.a,{value:c,placeholder:"443",style:{flex:"auto"},onChange:e.onHportChange})),r.a.createElement("div",{align:"right"},r.a.createElement(S.a,{type:"link",style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:e.addItem},r.a.createElement(We.a,null)," \u6dfb\u52a0\u9009\u9879")))}},a.map((function(e){return r.a.createElement(s,{key:e},e)})))}}]),t}(r.a.Component),Ze=Be.a.TabPane;function $e(){var e=Object(f.g)().server_id;return r.a.createElement(fe.a,{ghost:!1,onBack:function(){return window.history.back()},title:"\u521b\u5efa\u5bb9\u5668",subTitle:"\u670d\u52a1\u5668:".concat(e)})}var et=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1,container_name_input:"",image_name_input:"",ports:{},ports2:{},command_input:"",entrypotin_input:"",user_input:"",ifTty:!1,ifInteractive:!1,network_name_input:"",hostname:"",network_ip:"",env:[],label:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleContainer_name_input",value:function(e){this.setState({container_name_input:e.target.value})}},{key:"handleImage_name_input",value:function(e){this.setState({image_name_input:e.label[0]})}},{key:"handlePorts",value:function(e,t){for(var a={},n={},r=0;r<e.length;r++)a=Object(Le.a)({},a,{},JSON.parse(e[r]));for(var l=0;l<t.length;l++)n=Object(Le.a)({},n,{},JSON.parse(t[l]));this.setState({ports:a,ports2:n})}},{key:"handleCommand_input",value:function(e){this.setState({command_input:e.target.value})}},{key:"handleEntrypotin_input",value:function(e){this.setState({entrypotin_input:e.target.value})}},{key:"handleUser_input",value:function(e){this.setState({user_input:e.target.value})}},{key:"handleIfTty",value:function(){this.state.ifTty?this.setState({ifTty:!1}):this.setState({ifTty:!0})}},{key:"handleIfInteractive",value:function(){this.state.ifInteractive?this.setState({ifInteractive:!1}):this.setState({ifInteractive:!0})}},{key:"handleNetwork_name_input",value:function(e){this.setState({network_name_input:e.label})}},{key:"handleHostname",value:function(e){this.setState({hostname:e.target.value})}},{key:"handleNetwork_ip",value:function(e){this.setState({network_ip:e.target.value})}},{key:"handleEvn",value:function(e){for(var t=[],a=0;a<e.length;a++)t=[].concat(Object(Me.a)(t),[JSON.parse(e[a])]);this.setState({env:t})}},{key:"handleLabel",value:function(e){for(var t=[],a=0;a<e.length;a++)t=[].concat(Object(Me.a)(t),[JSON.parse(e[a])]);this.setState({label:t})}},{key:"test",value:function(){console.log(this.state)}},{key:"handle_send",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t,a,n,l,i,c,s,o,u,m,d,p,h,E,f,g,_=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.container_name_input,n=t.image_name_input,l=t.ports,i=t.ports2,c=t.command_input,s=t.entrypotin_input,o=t.user_input,u=t.ifTty,m=t.ifInteractive,d=t.network_name_input,p=t.hostname,h=t.network_ip,E=t.env,f=t.label,p,E,f,""!==n){e.next=7;break}return C.a.error("\u5fc5\u8981\u4fe1\u606f\u6ca1\u6709\u586b\u5199\u5b8c\u6574\uff01"),e.abrupt("return");case 7:return g="",""!==d&&(g='{"'.concat(d,'":{"IPAMConfig":{"IPv4Address":"').concat(h,'"}}}'),g=JSON.parse(g)),C.a.loading({content:"\u5bb9\u5668\u521b\u5efa\u4e2d",key:"updatable",duration:0}),this.setState({loading:!0}),e.next=13,v.a.post("/api",{api:"container_add",server_id:this.props.server_id,image:n,name:a,connect_port:l,export_port:i,cmd:c,entrypoint:s,user:o,Tty:u,interactive:m,network_model:g}).then((function(e){if(_.setState({loading:!1}),setTimeout((function(){C.a.success({content:"\u5ba2\u6237\u7aef\u5df2\u63a5\u6536\u6570\u636e\uff01",key:"updatable",duration:2})}),1e3),console.log(e.data.data.data),!e.data.data.data.message)return A.a.open({message:"\u521b\u5efa\u6210\u529f\uff01",description:"\u7f51\u7edc:".concat(e.data.data.data.Id,"\u521b\u5efa\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}),C.a.loading({content:"\u5bb9\u5668\u542f\u52a8\u4e2d",key:"updatable",duration:0}),void v.a.post("/api",{api:"container_start",server_id:_.props.server_id,container_id:e.data.data.data.Id}).then((function(e){console.log(e.data.data),setTimeout((function(){C.a.success({content:"\u5bb9\u5668\u542f\u52a8\u6210\u529f\uff01",key:"updatable",duration:2})}),1e3),window.history.back()}));A.a.open({message:"\u521b\u5efa\u5931\u8d25\uff01",description:"".concat(e.data.data.data.message),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading;return r.a.createElement("div",null,r.a.createElement($e,null),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u540d\u5b57",name:"container_name"},r.a.createElement(L.a,{placeholder:"\u4e3a\u65b0\u5bb9\u5668\u8d77\u4e2a\u540d\u5b57\u5427~",style:{width:"450px"},onChange:function(t){return e.handleContainer_name_input(t)}}))),r.a.createElement(y.a,{orientation:"left"},"\u955c\u50cf\u9009\u62e9"),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u955c\u50cf",name:"image_name"},r.a.createElement(Je,{server_id:this.props.server_id,onChange:function(t){return e.handleImage_name_input(t)}}))),r.a.createElement(y.a,{orientation:"left"},"\u7aef\u53e3\u6620\u5c04"),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u89c4\u5219\u8bbe\u7f6e",name:"ports"},r.a.createElement(Xe,{onChange:function(t,a){return e.handlePorts(t,a)}}))),r.a.createElement(y.a,{orientation:"left"},"\u9ad8\u7ea7\u8bbe\u7f6e(\u65e0\u7279\u6b8a\u9700\u6c42\u53ef\u4ee5\u5ffd\u7565)"),r.a.createElement(Be.a,{defaultActiveKey:"1"},r.a.createElement(Ze,{tab:r.a.createElement("span",null,r.a.createElement(Ve.a,null),"\u53c2\u6570\u8bbe\u7f6e"),key:"1"},r.a.createElement("div",null,r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u8fdb\u5165\u547d\u4ee4(cmd)",name:"command"},r.a.createElement(L.a,{placeholder:"/bin/bash",style:{width:"450px"},onChange:function(t){return e.handleCommand_input(t)}})),r.a.createElement(He.a.Item,{label:"\u5165\u53e3\u53c2\u6570(entrypoint)",name:"entrypoint"},r.a.createElement(L.a,{placeholder:"/bin/bash",style:{width:"450px"},onChange:function(t){return e.handleEntrypotin_input(t)}})),r.a.createElement(He.a.Item,{label:"\u8bbe\u5b9a\u8fd0\u884c\u7528\u6237",name:"user"},r.a.createElement(L.a,{placeholder:"root",style:{width:"450px"},onChange:function(t){return e.handleUser_input(t)}}))),"\u521b\u5efa\u6a21\u62df\u7ec8\u7aef(-t):",r.a.createElement(ze.a,{onChange:function(){return e.handleIfTty()},style:{marginLeft:4,marginRight:8}}),"| \u4ea4\u4e92\u6a21\u5f0f(-i):",r.a.createElement(ze.a,{onChange:function(){return e.handleIfInteractive()},style:{marginLeft:4,marginRight:8}}))),r.a.createElement(Ze,{tab:r.a.createElement("span",null,r.a.createElement(ue.a,null),"\u7f51\u7edc\u8bbe\u7f6e"),key:"2"},r.a.createElement("div",null,r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u7f51\u5361\u9009\u62e9",name:"network_drive"},r.a.createElement(Qe,{server_id:this.props.server_id,onChange:function(t){return e.handleNetwork_name_input(t)}})),r.a.createElement(He.a.Item,{label:"\u4e3b\u673a\u540d(Hostname)",name:"hostname"},r.a.createElement(L.a,{placeholder:"hostname",style:{width:"450px"},onChange:function(t){return e.handleHostname(t)}})),r.a.createElement(He.a.Item,{label:"IP",name:"network_ip"},r.a.createElement(L.a,{placeholder:"172.99.99.99",style:{width:"450px"},onChange:function(t){return e.handleNetwork_ip(t)}}))))),r.a.createElement(Ze,{tab:r.a.createElement("span",null,r.a.createElement(Ae.a,null),"\u73af\u5883\u53d8\u91cf"),key:"3"},r.a.createElement("div",null,r.a.createElement(qe,{args:"\u8bf7\u4e3a\u5bb9\u5668\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf",onChange:function(t){return e.handleEvn(t)}}))),r.a.createElement(Ze,{tab:r.a.createElement("span",null,r.a.createElement(Ue.a,null),"\u6807\u7b7e\u8bbe\u7f6e"),key:"4"},r.a.createElement("div",null,r.a.createElement(qe,{args:"\u8bf7\u4e3a\u5bb9\u5668\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6807\u7b7e(\u53ef\u9009)",onChange:function(t){return e.handleLabel(t)}}))),r.a.createElement(Ze,{tab:r.a.createElement("span",null,r.a.createElement(Ge.a,null),"\u8d44\u6e90\u5206\u914d"),key:"5"},r.a.createElement("div",null,r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"CPU",name:"cpu"},r.a.createElement(De.a,{min:0,max:1,style:{marginLeft:16},step:.01}))),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"Memeory",name:"memeory"},r.a.createElement(De.a,{min:0,max:1,style:{marginLeft:16},step:.01})))))),r.a.createElement(y.a,{orientation:"left"},"\u64cd\u4f5c"),r.a.createElement(S.a,{type:"primary",loading:t,onClick:function(){return e.handle_send()}},"\u63d0\u4ea4"))}}]),t}(r.a.Component);function tt(){var e=Object(f.g)().server_id,t=Object(f.h)().url;return r.a.createElement("div",null,r.a.createElement(et,{server_id:e,url:t}))}var at=a(601),nt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){a.send_message()},a.handleCancel=function(e){a.setState({visible:!1})},a.state={visible:!1,loading:!1,input_image_name:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"send_message",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t,a=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.input_image_name,this.setState({loading:!0}),C.a.loading({content:"\u670d\u52a1\u5668\u4e0b\u8f7d\u4e2d...",key:"updatable",duration:0}),e.next=5,v.a.post("/api",{api:"image_pull",server_id:this.props.server_id,image_name:t}).then((function(e){setTimeout((function(){C.a.success({content:"\u5ba2\u6237\u7aef\u5df2\u63a5\u6536\u6570\u636e\uff01",key:"updatable",duration:2})}),1e3),console.log(e.data.data.data),e.data.data.data.message?(A.a.open({message:"\u4e0b\u8f7d\u5931\u8d25\uff01",description:"".concat(e.data.data.data.message),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}),a.setState({loading:!1})):(A.a.open({message:"\u4e0b\u8f7d\u6210\u529f\uff01",description:"\u955c\u50cf:".concat(t,"\u4e0b\u8f7d\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}),a.setState({visible:!1,loading:!1,input_image_name:""}),a.props.onFresh())}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleInput_image_name",value:function(e){this.setState({input_image_name:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.input_image_name,n=t.loading;return r.a.createElement("div",null,r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(at.a,null),onClick:this.showModal},"\u6dfb\u52a0\u65b0\u955c\u50cf"),r.a.createElement(H.a,{title:"\u6dfb\u52a0\u65b0\u955c\u50cf",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel,confirmLoading:n},r.a.createElement("p",null,"\u670d\u52a1\u5668\u5c06\u8bbf\u95eedockerhub\u641c\u7d22\u5e76\u4e0b\u8f7d\u955c\u50cf"),r.a.createElement(L.a,{placeholder:"\u8bf7\u8f93\u5165\u955c\u50cf\u540d\u5b57",addonBefore:"docker.io",onChange:function(t){return e.handleInput_image_name(t)},value:a})))}}]),t}(r.a.Component),rt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"delete_image",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=0;case 2:if(!(t<this.props.selected.length)){e.next=8;break}return e.next=5,v.a.post("/api",{api:"image_delele",server_id:this.props.server_id,image_id:this.props.selected[t]}).then((function(e){console.log(e.data.data.data),e.data.data.data.message?A.a.open({message:"\u5220\u9664\u5931\u8d25\uff01",description:"".concat(e.data.data.data.message),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}):A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u955c\u50cf\u5220\u9664\u6210\u529f\uff01",icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 5:t++,e.next=2;break;case 8:this.setState({loading:!1}),this.props.onFresh();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading;return r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(ee.a,null),danger:!0,disabled:this.props.disabled,loading:t,onClick:function(){return e.delete_image()}},"\u5220\u9664\u6240\u9009\u955c\u50cf")}}]),t}(r.a.Component),lt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0}),a.fetch()},a.onClose=function(){a.setState({visible:!1})},a.state={visible:!1,data:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"image_inspect",server_id:this.props.server_id,image_id:this.props.image_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data})}))}},{key:"render",value:function(){var e=this.state.data;return e.Id?r.a.createElement("div",null,r.a.createElement(K.a,{placement:"top",title:"\u67e5\u770b\u8be5\u955c\u50cf"},r.a.createElement(S.a,{type:"link",onClick:this.showDrawer},this.props.image_id)),r.a.createElement(Oe.a,{title:"\u955c\u50cf\u4fe1\u606f",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:720},r.a.createElement(Se.a,{title:"\u57fa\u672c\u4fe1\u606f",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},r.a.createElement(Se.a.Item,{span:2,label:"ID"},e.Id?e.Id:""),r.a.createElement(Se.a.Item,{label:"\u540d\u5b57"},e.RepoTags),r.a.createElement(Se.a.Item,{label:"Docker\u7248\u672c"},e.DockerVersion),r.a.createElement(Se.a.Item,{span:2,label:"\u6784\u5efa\u65f6\u95f4"},e.Created),r.a.createElement(Se.a.Item,{label:"\u6784\u5efa\u5e73\u53f0"},e.Architecture),r.a.createElement(Se.a.Item,{label:"\u9002\u7528\u7cfb\u7edf"},e.Os),r.a.createElement(Se.a.Item,{label:"\u955c\u50cf\u7ed3\u6784"},e.RootFS.Layers.map((function(e,t){return r.a.createElement("div",null,"".concat(t,": ").concat(e),r.a.createElement("br",null),r.a.createElement("br",null))})))))):r.a.createElement("div",null,r.a.createElement(K.a,{placement:"top",title:"\u67e5\u770b\u8be5\u955c\u50cf"},r.a.createElement(S.a,{type:"link",onClick:this.showDrawer},this.props.image_id)),r.a.createElement(Oe.a,{title:"\u955c\u50cf\u4fe1\u606f",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:720},r.a.createElement(Ee.a,{active:!0})))}}]),t}(r.a.Component);function it(e){var t=Object(f.g)().server_id,a=Object(f.h)().url;return r.a.createElement("div",null,r.a.createElement(st,null),r.a.createElement(ct,{server_id:t,url:a}))}var ct=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.state={data:[],loading:!0,selectedRowKeys:[]},a.columns=[{title:"ID",key:"id",width:"30%",ellipsis:!0,render:function(e,t){return r.a.createElement(lt,{image_id:t.Id,server_id:a.props.server_id})}},{title:"Tag",key:"tag",render:function(e,t){return r.a.createElement(D.a,{color:"#108ee9"},t.RepoTags)}},{title:"\u521b\u5efa\u65f6\u95f4",key:"time",render:function(e,t){return ke()(1e3*t.Created).format("YYYY-MM-DD HH:mm:ss")}}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"handleRefresh",value:function(){this.fetch(),this.setState({selectedRowKeys:[]})}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"image_info",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data,loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading,l=t.selectedRowKeys,i={selectedRowKeys:l,onChange:this.onSelectChange},c=l.length>0;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u955c\u50cf\u4e00\u89c8",extra:r.a.createElement(nt,{server_id:this.props.server_id,onFresh:function(){return e.handleRefresh()}})},r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(rt,{disabled:!c,loading:n,server_id:this.props.server_id,url:this.props.url,selected:l,onFresh:function(){return e.handleRefresh()}})),r.a.createElement(R.a,{loading:n,rowSelection:i,rowKey:function(e){return e.Id},columns:this.columns,dataSource:a,size:"middle"})))}}]),t}(r.a.Component);function st(){var e=Object(f.g)().server_id;return r.a.createElement(fe.a,{ghost:!1,title:"\u955c\u50cf\u8be6\u60c5",subTitle:"\u670d\u52a1\u5668:".concat(e)})}var ot=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"delete_network",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=0;case 2:if(!(t<this.props.selected.length)){e.next=8;break}return e.next=5,v.a.post("/api",{api:"network_delete",server_id:this.props.server_id,network_id:this.props.selected[t]}).then((function(e){console.log(e.data.data.data),e.data.data.data.message?A.a.open({message:"\u5220\u9664\u5931\u8d25\uff01",description:"".concat(e.data.data.data.message),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}):A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u7f51\u7edc\u5220\u9664\u6210\u529f\uff01",icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 5:t++,e.next=2;break;case 8:this.setState({loading:!1}),this.props.onFresh();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading;return r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(ee.a,null),danger:!0,disabled:this.props.disabled,loading:t,onClick:function(){return e.delete_network()}},"\u5220\u9664\u6240\u9009\u7f51\u7edc")}}]),t}(r.a.Component),ut=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0}),a.fetch()},a.onClose=function(){a.setState({visible:!1})},a.state={visible:!1,data:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"network_inspect",server_id:this.props.server_id,network_id:this.props.network_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data})}))}},{key:"render",value:function(){var e=this.state.data;return e.Id?r.a.createElement("div",null,r.a.createElement(K.a,{placement:"top",title:"\u67e5\u770b\u8be5\u7f51\u7edc"},r.a.createElement(S.a,{type:"link",onClick:this.showDrawer},this.props.network_name)),r.a.createElement(Oe.a,{title:"\u7f51\u7edc\u4fe1\u606f",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:720},r.a.createElement(Se.a,{title:"\u57fa\u672c\u4fe1\u606f",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:2,xs:1}},r.a.createElement(Se.a.Item,{span:2,label:"ID"},e.Id?e.Id:""),r.a.createElement(Se.a.Item,{label:"\u540d\u5b57"},e.Name),r.a.createElement(Se.a.Item,{label:"\u7f51\u7edc\u7c7b\u578b"},e.Driver),r.a.createElement(Se.a.Item,{span:2,label:"\u521b\u5efa\u65f6\u95f4"},e.Created),r.a.createElement(Se.a.Item,{span:2,label:"\u8be6\u60c5"},e.IPAM.Config.map((function(e,t){return r.a.createElement("div",null,"\u7f51\u5173: ".concat(e.Gateway),r.a.createElement("br",null),"\u7f51\u6bb5: ".concat(e.Subnet))})))))):r.a.createElement("div",null,r.a.createElement(K.a,{placement:"top",title:"\u67e5\u770b\u8be5\u7f51\u7edc"},r.a.createElement(S.a,{type:"link",onClick:this.showDrawer},this.props.network_name)),r.a.createElement(Oe.a,{title:"\u7f51\u7edc\u4fe1\u606f",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible,width:720},r.a.createElement(Ee.a,{active:!0})))}}]),t}(r.a.Component);function mt(e){var t=Object(f.g)().server_id,a=Object(f.h)().url;return r.a.createElement("div",null,r.a.createElement(pt,null),r.a.createElement(dt,{server_id:t,url:a}))}var dt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.state={data:[],loading:!0,selectedRowKeys:[]},a.columns=[{title:"\u540d\u5b57",key:"name",render:function(e,t){return r.a.createElement(ut,{network_name:t.Name,network_id:t.Id,server_id:a.props.server_id})}},{title:"\u7f51\u7edc\u7c7b\u578b",key:"type",render:function(e,t){return r.a.createElement(D.a,{color:"#2db7f5"},t.Driver)}},{title:"\u521b\u5efa\u65f6\u95f4",key:"time",render:function(e,t){return t.Created}}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"handleRefresh",value:function(){this.fetch(),this.setState({selectedRowKeys:[]})}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"network_info",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data,loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading,l=t.selectedRowKeys,i={selectedRowKeys:l,onChange:this.onSelectChange},c=l.length>0;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u7f51\u7edc\u4e00\u89c8",extra:r.a.createElement(E.b,{to:"".concat(this.props.url,"/create")},r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(ue.a,null)},"\u6dfb\u52a0\u65b0\u7f51\u7edc"))},r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(ot,{disabled:!c,server_id:this.props.server_id,url:this.props.url,selected:l,onFresh:function(){return e.handleRefresh()}})),r.a.createElement(R.a,{loading:n,rowSelection:i,rowKey:function(e){return e.Id},columns:this.columns,dataSource:a,size:"middle"})))}}]),t}(r.a.Component);function pt(){var e=Object(f.g)().server_id;return r.a.createElement(fe.a,{ghost:!1,title:"\u7f51\u7edc\u8be6\u60c5",subTitle:"\u670d\u52a1\u5668:".concat(e)})}var ht=a(602),vt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={items:[],items_value:{},input_key:"",input_value:"",selected:[]},a.onKeyChange=function(e){a.setState({input_key:e.target.value})},a.onValueChange=function(e){a.setState({input_value:e.target.value})},a.addItem=function(){var e=a.state,t=e.items,n=e.input_value,r=e.input_key;a.setState({items:[].concat(Object(Me.a)(t),['{"'.concat(r,'":"').concat(n,'"}')]),input_key:"",input_value:""})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.input_key,l=t.input_value,i=Ye.a.Option;return r.a.createElement(Ye.a,{mode:"multiple",style:{width:"600px"},placeholder:this.props.args,onChange:function(t){return e.props.onChange(t)},dropdownRender:function(t){return r.a.createElement("div",null,t,r.a.createElement(y.a,{style:{margin:"4px 0"},orientation:"left"},"\u9009\u9879\u6dfb\u52a0"),r.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},r.a.createElement(L.a,{addonBefore:"key",style:{flex:"auto"},value:n,onChange:e.onKeyChange}),":",r.a.createElement(L.a,{addonBefore:"value",style:{flex:"auto"},value:l,onChange:e.onValueChange})),r.a.createElement("div",{align:"right"},r.a.createElement(S.a,{type:"link",style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:e.addItem},r.a.createElement(We.a,null)," \u6dfb\u52a0\u9009\u9879")))}},a.map((function(e){return r.a.createElement(i,{key:e},e)})))}}]),t}(r.a.Component);function Et(){var e=Object(f.g)().server_id;return r.a.createElement(fe.a,{ghost:!1,onBack:function(){return window.history.back()},title:"\u521b\u5efa\u65b0\u7f51\u7edc",subTitle:"\u670d\u52a1\u5668:".concat(e)})}var ft=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1,network_name_input:"",network_type_input:"bridge",network_type_option_input:{},network_subnet_input:"",network_iprange_input:"",network_gateway_input:"",network_label_input:[],network_macvlan_drive_input:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleNetwork_name_input",value:function(e){this.setState({network_name_input:e.target.value})}},{key:"handleNetwork_type_input",value:function(e){this.setState({network_type_input:e})}},{key:"handleNetwork_type_option_input",value:function(e){for(var t={},a=0;a<e.length;a++)t=Object(Le.a)({},t,{},JSON.parse(e[a]));this.setState({network_type_option_input:t})}},{key:"handleNetwork_subnet_input",value:function(e){this.setState({network_subnet_input:e.target.value})}},{key:"handleNetwork_iprange_input",value:function(e){this.setState({network_iprange_input:e.target.value})}},{key:"handleNetwork_gateway_input",value:function(e){this.setState({network_gateway_input:e.target.value})}},{key:"handleNetwork_macvlan_drive_input",value:function(e){this.setState({network_macvlan_drive_input:e.target.value})}},{key:"handleNetwork_label_input",value:function(e){for(var t=[],a=0;a<e.length;a++)t=[].concat(Object(Me.a)(t),[JSON.parse(e[a])]);this.setState({network_label_input:t})}},{key:"handleUpload",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t,a,n,l,i,c,s,o,u,m;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({loading:!0}),t=this.state,a=t.network_name_input,n=t.network_type_input,l=t.network_type_option_input,i=t.network_subnet_input,c=t.network_iprange_input,s=t.network_gateway_input,o=t.network_label_input,u=t.network_macvlan_drive_input,o,""!==a){e.next=7;break}return C.a.error("\u5fc5\u8981\u4fe1\u606f\u6ca1\u6709\u586b\u5199\u5b8c\u6574\uff01"),this.setState({loading:!1}),e.abrupt("return");case 7:return m=l,"macvlan"===n&&(m=Object(Le.a)({},l,{},JSON.parse('{"parent":"'.concat(u,'"}')))),C.a.loading({content:"\u7f51\u7edc\u521b\u5efa\u4e2d",key:"updatable",duration:0}),e.next=12,v.a.post("/api",{api:"network_create",server_id:this.props.server_id,network_name:a,network_drive:n,subnet:i,ip_range:c,gateway:s,option:m}).then((function(e){if(setTimeout((function(){C.a.success({content:"\u5ba2\u6237\u7aef\u5df2\u63a5\u6536\u6570\u636e\uff01",key:"updatable",duration:2})}),1e3),console.log(e.data.data.data),!e.data.data.data.message)return A.a.open({message:"\u521b\u5efa\u6210\u529f\uff01",description:"\u7f51\u7edc:".concat(e.data.data.data.Id,"\u521b\u5efa\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}),void window.history.back();A.a.open({message:"\u521b\u5efa\u5931\u8d25\uff01",description:"".concat(e.data.data.data.message),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 12:this.setState({loading:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Ye.a.Option,a=this.state,n=a.loading,l=a.network_type_input;return r.a.createElement("div",null,r.a.createElement(Et,null),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u540d\u5b57",name:"network_name"},r.a.createElement(L.a,{placeholder:"\u4e3a\u65b0\u7f51\u7edc\u8d77\u4e2a\u540d\u5b57\u5427~",style:{width:"450px"},onChange:function(t){return e.handleNetwork_name_input(t)}}))),r.a.createElement(y.a,{orientation:"left"},"\u7f51\u7edc\u7c7b\u578b\u914d\u7f6e"),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u7f51\u7edc\u7c7b\u578b",name:"network_type"},r.a.createElement(Ye.a,{defaultValue:"bridge",style:{width:"450px"},onChange:function(t){return e.handleNetwork_type_input(t)}},r.a.createElement(t,{value:"bridge"},"NAT"),r.a.createElement(t,{value:"macvlan"},"\u6865\u63a5"))),r.a.createElement(He.a.Item,{label:"\u7f51\u7edc\u7c7b\u578b\u9009\u9879",name:"network_type_option"},r.a.createElement(vt,{args:"\u8bf7\u4e3a\u7f51\u7edc\u6dfb\u52a0\u81ea\u5b9a\u4e49\u9009\u9879(\u53ef\u9009)",onChange:function(t){return e.handleNetwork_type_option_input(t)}}))),r.a.createElement(y.a,{orientation:"left"},"\u7f51\u7edc\u8be6\u60c5\u914d\u7f6e"),"macvlan"===l?r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u6865\u63a5\u7f51\u5361",name:"macvlan_drive"},r.a.createElement(L.a,{placeholder:"\u5982:eth0",style:{width:"450px"},onChange:function(t){return e.handleNetwork_macvlan_drive_input(t)}})),r.a.createElement(He.a.Item,{label:"\u5b50\u7f51\u6bb5",name:"subnet"},r.a.createElement(L.a,{placeholder:"\u5982:172.18.0.0/16",style:{width:"450px"},onChange:function(t){return e.handleNetwork_subnet_input(t)}})),r.a.createElement(He.a.Item,{label:"IP\u6bb5",name:"iprange"},r.a.createElement(L.a,{placeholder:"\u5982:172.18.0.0/25",style:{width:"450px"},onChange:function(t){return e.handleNetwork_iprange_input(t)}})),r.a.createElement(He.a.Item,{label:"\u7f51\u5173",name:"gateway"},r.a.createElement(L.a,{placeholder:"\u5982:172.18.0.1",style:{width:"450px"},onChange:function(t){return e.handleNetwork_gateway_input(t)}}))):r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u5b50\u7f51\u6bb5",name:"subnet"},r.a.createElement(L.a,{placeholder:"\u5982:172.18.0.0/16",style:{width:"450px"},onChange:function(t){return e.handleNetwork_subnet_input(t)}})),r.a.createElement(He.a.Item,{label:"IP\u6bb5",name:"iprange"},r.a.createElement(L.a,{placeholder:"\u5982:172.18.0.0/25",style:{width:"450px"},onChange:function(t){return e.handleNetwork_iprange_input(t)}})),r.a.createElement(He.a.Item,{label:"\u7f51\u5173",name:"gateway"},r.a.createElement(L.a,{placeholder:"\u5982:172.18.0.1",style:{width:"450px"},onChange:function(t){return e.handleNetwork_gateway_input(t)}}))),r.a.createElement(y.a,{orientation:"left"},"\u9ad8\u7ea7\u914d\u7f6e"),r.a.createElement(He.a,null,r.a.createElement(He.a.Item,{label:"\u7f51\u7edc\u7c7b\u578b\u9009\u9879",name:"network_type_option"},r.a.createElement(vt,{args:"\u8bf7\u4e3a\u7f51\u7edc\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6807\u7b7e(\u53ef\u9009)",onChange:function(t){return e.handleNetwork_label_input(t)}}))),r.a.createElement(y.a,{orientation:"left"},"\u64cd\u4f5c"),r.a.createElement(S.a,{type:"primary",icon:r.a.createElement(ht.a,null),shape:"round",onClick:function(){return e.handleUpload()},loading:n},"\u521b\u5efa\u7f51\u7edc"))}}]),t}(r.a.Component);function gt(){var e=Object(f.g)().server_id,t=Object(f.h)().url;return r.a.createElement(ft,{server_id:e,url:t})}a(177);var _t=a(93),bt=a(603);a(116);function yt(e){var t=e.data.cpu.cpu_used,a=e.data.cpu.cpu_number;return r.a.createElement(P.a,{className:"site-layout-card",style:{height:200,margin:"0 auto"}},r.a.createElement(_t.a,{title:"CPU\u5360\u7528\u7387",value:t,suffix:"%"}),r.a.createElement(y.a,{style:{margin:"4px 0"}}),r.a.createElement(bt.a,null),"  CPU\u6838\u5fc3\u6570\u91cf: ",r.a.createElement("b",null,a))}var kt=a(604),wt=a(605);function Ot(e){var t=e.data.memory.used;t=t.toFixed(2);var a=e.data.memory.total,n=t/(a=a.toFixed(2))*100;return n=n.toFixed(2),r.a.createElement(P.a,{className:"site-layout-card",style:{height:200,margin:"0 auto"}},r.a.createElement(_t.a,{title:"\u5185\u5b58\u5360\u7528\u767e\u5206\u6bd4",value:n,suffix:"%"}),r.a.createElement("br",null),r.a.createElement(kt.a,null),"  \u5df2\u4f7f\u7528: ",r.a.createElement("b",null,t," GB"),r.a.createElement(y.a,{style:{margin:"4px 0"}}),r.a.createElement(wt.a,null),"  \u5185\u5b58\u603b\u91cf: ",r.a.createElement("b",null,a," GB"))}function jt(e){var t=e.data.memory_swap.used;t=t.toFixed(2);var a=e.data.memory_swap.total,n=t/(a=a.toFixed(2))*100;return n=n.toFixed(2),r.a.createElement(P.a,{className:"site-layout-card",style:{height:200,margin:"0 auto"}},r.a.createElement(_t.a,{title:"\u4ea4\u6362\u7a7a\u95f4\u5360\u7528\u767e\u5206\u6bd4",value:n,suffix:"%"}),r.a.createElement("br",null),r.a.createElement(kt.a,null),"  \u5df2\u4f7f\u7528: ",r.a.createElement("b",null,t," GB"),r.a.createElement(y.a,{style:{margin:"4px 0"}}),r.a.createElement(wt.a,null),"  \u4ea4\u6362\u7a7a\u95f4\u603b\u91cf: ",r.a.createElement("b",null,a," GB"))}var St=a(606),xt=a(607);function Ct(e){var t=e.data.network.receive,a=e.data.network.send,n=e.data.network.time,l=e.data.network.last_receive,i=e.data.network.last_send,c=e.data.network.last_time,s=(t-l)/(n-c),o=(a-i)/(n-c),u="b/s",m="b/s";return(s/=8)>1e3&&(u="kb/s",(s/=1024)>1e3&&(u="mb/s",(s/=1024)>1e3&&(s/=1024,u="gb/s"))),(o/=8)>1e3&&(m="kb/s",(o/=1024)>1e3&&(m="mb/s",(o/=1024)>1e3&&(o/=1024,m="gb/s"))),r.a.createElement(P.a,{className:"site-layout-card",style:{height:200,margin:"0 auto"}},r.a.createElement(_t.a,{title:"\u7f51\u7edc\u63a5\u6536\u6570\u636e",value:s,precision:2,valueStyle:{color:"#cf1322"},prefix:r.a.createElement(St.a,null),suffix:u}),r.a.createElement(y.a,{style:{margin:"10px 0"}}),r.a.createElement(_t.a,{title:"\u7f51\u7edc\u53d1\u9001\u6570\u636e",value:o,precision:2,valueStyle:{color:"#3f8600"},prefix:r.a.createElement(xt.a,null),suffix:m}))}a(150);var It=a(84),Nt=It.a.Paragraph;function Ft(e){var t=0,a=0;if(e.data.Containers){t=e.data.Containers.length,a=0;for(var n=0;n<t;n++)"running"===e.data.Containers[n].State&&a++}return r.a.createElement(P.a,{size:"small",title:r.a.createElement("div",null,r.a.createElement(se.a,{spin:!0,style:{fontSize:"21px"}}),"   ",r.a.createElement("b",null,"\u5bb9\u5668")),style:{margin:"0 auto"}},r.a.createElement(Nt,null,r.a.createElement("ul",null,r.a.createElement("li",null,"\u5df2\u521b\u5efa: ",r.a.createElement("b",null,t)),r.a.createElement("br",null),r.a.createElement("li",null,"\u6b63\u5728\u8fd0\u884c: ",r.a.createElement("b",null,a)))))}var Tt=It.a.Paragraph;function Pt(e){var t=0,a=0;if(e.data.Images){t=e.data.Images.length;for(var n=0;n<t;n++)a+=e.data.Images[n].Size;a=(a=a/1024/1024/1024).toFixed(2)}return r.a.createElement(P.a,{size:"small",title:r.a.createElement("div",null,r.a.createElement(oe.a,{spin:!0,style:{fontSize:"21px"}}),"  ",r.a.createElement("b",null,"\u955c\u50cf")),style:{margin:"0 auto"}},r.a.createElement(Tt,null,r.a.createElement("ul",null,r.a.createElement("li",null,"\u6570\u91cf: ",r.a.createElement("b",null,t)),r.a.createElement("br",null),r.a.createElement("li",null,"\u5360\u7528\u7a7a\u95f4: ",r.a.createElement("b",null,a," GB")))))}var Rt=It.a.Paragraph;function Kt(e){var t=0,a=0;if(e.data.Volumes){t=e.data.Volumes.length;for(var n=0;n<t;n++)a+=e.data.Volumes[n].UsageData.Size;(a=a/1024/1024)>1e3?(a=(a/=1024).toFixed(2),a="".concat(a," GB")):(a=a.toFixed(2),a="".concat(a," MB"))}return r.a.createElement(P.a,{size:"small",title:r.a.createElement("div",null,r.a.createElement(me.a,{spin:!0,style:{fontSize:"21px"}}),"  ",r.a.createElement("b",null,"\u5377")),style:{margin:"0 auto"}},r.a.createElement(Rt,null,r.a.createElement("ul",null,r.a.createElement("li",null,"\u6570\u91cf: ",r.a.createElement("b",null,t)),r.a.createElement("br",null),r.a.createElement("li",null,"\u5360\u7528\u7a7a\u95f4: ",r.a.createElement("b",null,a)))))}function Dt(){var e=Object(f.g)().server_id;return r.a.createElement("div",null,r.a.createElement(fe.a,{ghost:!1,title:"\u603b\u89c8",subTitle:"\u670d\u52a1\u5668:".concat(e)}),r.a.createElement(zt,{server_id:e}))}var zt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={data:{cpu:{cpu_number:0,cpu_used:0},memory:{total:0,used:0,free:0},memory_swap:{total:0,used:0,free:0},network:{receive:0,send:0,time:0,last_receive:0,last_send:0,last_time:0}},data_docker:{}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.interval=setInterval((function(){return e.fetch()}),1e3),this.fetch_docker()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"check_server_status",server_id:this.props.server_id}).then((function(t){var a=e.state.data,n=Object(Le.a)({},t.data.data.data);n.network.last_receive=a.network.receive,n.network.last_send=a.network.send,n.network.last_time=a.network.time,e.setState({data:n})}))}},{key:"fetch_docker",value:function(){var e=this;v.a.post("/api",{api:"system_use",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data_docker:t.data.data.data})}))}},{key:"callback",value:function(e){console.log(e)}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.data_docker;return r.a.createElement("div",null,r.a.createElement(y.a,{orientation:"left"},"\u7cfb\u7edf\u8d44\u6e90\u7edf\u8ba1"),r.a.createElement(g.a,{justify:"space-around",gutter:[16,16]},r.a.createElement(_.a,{span:6},r.a.createElement(yt,{data:t})),r.a.createElement(_.a,{span:6},r.a.createElement(Ot,{data:t})),r.a.createElement(_.a,{span:6},r.a.createElement(jt,{data:t})),r.a.createElement(_.a,{span:6},r.a.createElement(Ct,{data:t}))),r.a.createElement(y.a,{orientation:"left"},"Docker\u8d44\u6e90\u7edf\u8ba1"),r.a.createElement(g.a,{justify:"space-around",gutter:[16,16]},r.a.createElement(_.a,{span:8},r.a.createElement(Ft,{data:a})),r.a.createElement(_.a,{span:8},r.a.createElement(Pt,{data:a})),r.a.createElement(_.a,{span:8},r.a.createElement(Kt,{data:a}))))}}]),t}(r.a.Component),Ht=It.a.Paragraph;function Mt(e){var t=Object(f.g)().server_id;return r.a.createElement("div",null,r.a.createElement(fe.a,{ghost:!1,title:"\u670d\u52a1\u5668\u4fe1\u606f",subTitle:"\u670d\u52a1\u5668:".concat(t)}),r.a.createElement(y.a,null),r.a.createElement(Lt,{server_id:t}))}var Lt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChange=function(e){a.state.name!==e&&(console.log("Content change:",e),v.a.post("/api",{api:"server_change_name",server_id:a.props.server_id,server_name:e}).then((function(t){a.setState({name:e}),C.a.success("\u540d\u5b57\u4fee\u6539\u6210\u529f\uff01")})).catch((function(e){C.a.error("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})))},a.onChangeSsh=function(e){a.state.ssh!==e&&v.a.post("/api",{api:"server_change_ssh",server_id:a.props.server_id,server_ssh:e}).then((function(t){a.setState({ssh:e}),C.a.success("ssh\u670d\u52a1\u5668ip\u4fee\u6539\u6210\u529f\uff01")})).catch((function(e){C.a.error("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}))},a.state={data1:{},data2:{},name:"",ssh:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"system_infomation",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data1:t.data.data.data})})),v.a.post("/api",{api:"system_version",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data2:t.data.data.data})})),v.a.post("/api",{api:"server_one_info",server_id:this.props.server_id}).then((function(t){e.setState({name:t.data.name})})),v.a.post("/api",{api:"server_ssh_info",server_id:this.props.server_id,base64:!0}).then((function(t){e.setState({ssh:t.data.data.ip})}))}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"render",value:function(){var e=this.state,t=e.data1,a=e.data2,n=e.name,l=e.ssh;if(t.OSType){var i=t.MemTotal/1024/1024/1024;return i=i.toFixed(2),r.a.createElement("div",null,r.a.createElement(Se.a,{title:"\u7528\u6237\u8bbe\u5b9a",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Se.a.Item,{label:"\u8282\u70b9\u540d\u5b57"},r.a.createElement(Ht,{editable:{onChange:this.onChange}},n)),r.a.createElement(Se.a.Item,{label:"\u8282\u70b9ssh\u670d\u52a1ip"},r.a.createElement(Ht,{editable:{onChange:this.onChangeSsh}},l))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Se.a,{title:"\u7cfb\u7edf\u4fe1\u606f",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Se.a.Item,{label:"\u7cfb\u7edf\u5185\u6838"},t.OSType),r.a.createElement(Se.a.Item,{label:"\u7cfb\u7edf\u540d\u5b57"},t.Name),r.a.createElement(Se.a.Item,{label:"CPU\u5e73\u53f0"},t.Architecture),r.a.createElement(Se.a.Item,{label:"CPU\u6570\u91cf"},t.NCPU),r.a.createElement(Se.a.Item,{label:"\u5185\u5b58\u603b\u91cf"},"".concat(i," GB")),r.a.createElement(Se.a.Item,{label:"\u9a71\u52a8\u7c7b\u578b"},t.Driver),r.a.createElement(Se.a.Item,{label:"\u8be6\u7ec6\u4fe1\u606f"},"\u5185\u6838\u7248\u672c: ".concat(t.KernelVersion),r.a.createElement("br",null),"\u7cfb\u7edf\u7248\u672c: ".concat(t.OperatingSystem),r.a.createElement("br",null),"ID: ".concat(t.ID))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Se.a,{title:"Docker\u4fe1\u606f",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Se.a.Item,{label:"\u7248\u672c"},a.Version),r.a.createElement(Se.a.Item,{span:2,label:"\u6784\u5efa\u65f6\u95f4"},a.BuildTime),r.a.createElement(Se.a.Item,{label:"api\u7248\u672c"},a.ApiVersion),r.a.createElement(Se.a.Item,{label:"\u9002\u7528\u5e73\u53f0"},a.Arch),r.a.createElement(Se.a.Item,{label:"Go\u8bed\u8a00\u7248\u672c"},a.GoVersion)))}return r.a.createElement("div",null,r.a.createElement(Ee.a,{active:!0}),r.a.createElement(Ee.a,{active:!0}),r.a.createElement(Ee.a,{active:!0}))}}]),t}(r.a.Component),Bt=It.a.Paragraph;function Vt(e){var t=Object(f.g)().server_id;return r.a.createElement("div",null,r.a.createElement(fe.a,{ghost:!1,title:"\u670d\u52a1\u5668\u5bc6\u94a5\u4fe1\u606f",subTitle:"\u670d\u52a1\u5668:".concat(t)}),r.a.createElement(y.a,null),r.a.createElement(At,{server_id:t}))}var At=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onChangeUser=function(e){a.state.user!==e&&v.a.post("/api",{api:"server_change_user",server_id:a.props.server_id,server_user:e}).then((function(t){0===t.data.status?(a.setState({user:e}),C.a.success("\u7528\u6237\u4fee\u6539\u6210\u529f\uff01")):C.a.warning("\u53ea\u6709\u7ba1\u7406\u5458\u624d\u80fd\u4fee\u6539")})).catch((function(e){C.a.error("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}))},a.onChangePsw=function(e){a.state.psw!==e&&v.a.post("/api",{api:"server_change_psw",server_id:a.props.server_id,server_psw:e}).then((function(t){0===t.data.status?(a.setState({psw:e}),C.a.success("\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01")):C.a.warning("\u53ea\u6709\u7ba1\u7406\u5458\u624d\u80fd\u4fee\u6539")})).catch((function(e){C.a.error("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}))},a.state={id:"",user:"\u6682\u65e0\u6743\u9650\u67e5\u770b",psw:"\u6682\u65e0\u6743\u9650\u67e5\u770b"},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"psw_check"}).then((function(t){console.log(t.data.id),e.setState({id:t.data.id})})),v.a.post("/api",{api:"server_ssh_info",server_id:this.props.server_id}).then((function(t){e.setState({user:t.data.data.user,psw:t.data.data.psw})}))}},{key:"render",value:function(){var e=this.state,t=e.id,a=e.user,n=e.psw;return r.a.createElement("div",null,r.a.createElement(b.a,{message:"\u5173\u4e8e\u901a\u8baf\u5bc6\u94a5",description:"\u901a\u8baf\u5bc6\u94a5\u7531\u7cfb\u7edf\u81ea\u52a8\u751f\u6210\uff0c\u7528\u4e8e\u4e0e\u63a7\u5236\u8282\u70b9\u901a\u4fe1\u65f6\u4f7f\u7528\uff0c\u539f\u5219\u4e0a\u4e0d\u5141\u8bb8\u66f4\u6539\u3002\u5982\u679c\u670d\u52a1\u5668\u4e0e\u63a7\u5236\u8282\u70b9\u7ed1\u5b9a\u5931\u8d25\uff0c\u53ef\u5c1d\u8bd5\u590d\u5236\u901a\u8baf\u5bc6\u94a5\u624b\u52a8\u6dfb\u52a0\u81f3\u63a7\u5236\u8282\u70b9\uff01",type:"info",showIcon:!0}),r.a.createElement("br",null),r.a.createElement(Se.a,{title:"\u670d\u52a1\u5668\u5bc6\u94a5",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},r.a.createElement(Se.a.Item,{label:"\u901a\u8baf\u5bc6\u94a5",span:4},r.a.createElement(Bt,{copyable:!0},t)),r.a.createElement(Se.a.Item,{label:"\u767b\u5f55\u670d\u52a1\u5668\u7528\u6237"},r.a.createElement(Bt,{editable:{onChange:this.onChangeUser}},a)),r.a.createElement(Se.a.Item,{label:"\u767b\u5f55\u670d\u52a1\u5668\u5bc6\u7801"},r.a.createElement(Bt,{editable:{onChange:this.onChangePsw}},n))))}}]),t}(r.a.Component),Ut=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"delete_volume",value:function(){var e=Object(U.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,v.a.post("/api",{api:"volume_delete_unused",server_id:this.props.server_id}).then((function(e){if(console.log(e.data.data.data),e.data.data.data.message)A.a.open({message:"\u5220\u9664\u5931\u8d25\uff01",description:"".concat(e.data.data.data.message),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})});else{var t=e.data.data.data.SpaceReclaimed/1024/1024;t=t>1e3?"".concat((t/=1024).toFixed(2)," GB \u50a8\u5b58\u7a7a\u95f4"):"".concat(t.toFixed(2)," MB \u50a8\u5b58\u7a7a\u95f4"),A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u5df2\u91ca\u653e: ".concat(t),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}}));case 3:this.setState({loading:!1}),this.props.onFresh();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading;return r.a.createElement($.a,{placement:"top",title:"\u8be5\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500\uff0c\u60a8\u786e\u5b9a\u8981\u5220\u9664\u672a\u4f7f\u7528\u7684\u5377\u5417\uff1f",onConfirm:function(){return e.delete_volume()},okText:"\u786e\u5b9a",cancelText:"\u6211\u518d\u60f3\u60f3"},r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(ee.a,null),danger:!0,disabled:this.props.disabled,loading:t},"\u5220\u9664\u672a\u4f7f\u7528\u7684\u5377"))}}]),t}(r.a.Component);function Gt(){var e=Object(f.g)().server_id;return r.a.createElement(fe.a,{ghost:!1,title:"\u5377\u8be6\u60c5",subTitle:"\u670d\u52a1\u5668:".concat(e)})}function Yt(){var e=Object(f.g)().server_id,t=Object(f.h)().url;return r.a.createElement("div",null,r.a.createElement(Gt,null),r.a.createElement(Jt,{server_id:e,url:t}))}var Jt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={data:[],loading:!0},a.columns=[{title:"\u540d\u5b57",dataIndex:"Name",key:"name"},{title:"\u521b\u5efa\u65f6\u95f4",key:"time",dataIndex:"CreatedAt"}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"volume_info",server_id:this.props.server_id}).then((function(t){console.log(t.data.data.data),e.setState({data:t.data.data.data.Volumes,loading:!1})}))}},{key:"fresh_table",value:function(){this.fetch()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u5377\u4e00\u89c8",extra:r.a.createElement(Ut,{server_id:this.props.server_id,onFresh:function(){return e.fresh_table()}})},r.a.createElement(R.a,{loading:n,rowKey:function(e){return e.Name},columns:this.columns,dataSource:a,size:"middle"})))}}]),t}(r.a.Component),Wt=w.a.Content;function qt(){var e=Object(f.h)().url;return r.a.createElement(w.a,null,r.a.createElement(T,{number:"1"}),r.a.createElement(w.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id")},r.a.createElement(ve,{selectOptins:"0"})),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/serverinfo")},r.a.createElement(ve,{openKey:"sub1",selectOptins:"1"})),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/server_secret")},r.a.createElement(ve,{openKey:"sub1",selectOptins:"2"})),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/containerinfo")},r.a.createElement(ve,{openKey:"sub2",selectOptins:"5"})),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/image")},r.a.createElement(ve,{openKey:"sub4",selectOptins:"9"})),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/network")},r.a.createElement(ve,{openKey:"sub5",selectOptins:"10"})),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/volume")},r.a.createElement(ve,{openKey:"sub6",selectOptins:"11"}))),r.a.createElement(w.a,{style:{padding:"0 24px 24px"}},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(Dt,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/serverinfo")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u670d\u52a1\u5668\u4fe1\u606f")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(Mt,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/server_secret")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u670d\u52a1\u5668\u5bc6\u94a5")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(Vt,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/containerinfo")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u5bb9\u5668\u603b\u89c8")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(Ke,null))),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/containerinfo/create")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u5bb9\u5668\u521b\u5efa")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(tt,null))),r.a.createElement(f.b,{path:"".concat(e,"/:server_id/containerinfo/info/:id")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u5bb9\u5668\u603b\u89c8"),r.a.createElement(k.a.Item,null,"\u5bb9\u5668\u8be6\u60c5")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(be,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/image")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u955c\u50cf\u4e00\u89c8")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(it,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/network")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u7f51\u7edc\u603b\u89c8")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(mt,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/network/create")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u521b\u5efa\u65b0\u7f51\u7edc")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(gt,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/:server_id/volume/")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4e3b\u9875"),r.a.createElement(k.a.Item,null,"\u5377\u7ba1\u7406")),r.a.createElement(Wt,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(Yt,null)))))))}a(151);var Qt=a(76),Xt=a(609),Zt=(a(169),a(78)),$t=a(608),ea=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a.layout={labelCol:{span:8},wrapperCol:{span:12}},a.tailLayout={wrapperCol:{offset:8,span:12}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"onFinish",value:function(){var e=Object(U.a)(V.a.mark((function e(t){var a=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),this.setState({loading:!0}),e.next=4,v.a.post("/api",{api:"login",username:t.username,password:t.password}).then((function(e){console.log(e.data),0===e.data.status?a.props.Login():(C.a.info("\u7528\u6237\u6216\u5bc6\u7801\u9519\u8bef\uff01"),a.setState({loading:!1}))}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onFinishFailed",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u767b\u5f55",style:{width:400,boxShadow:"2px 4px 6px #123"}},r.a.createElement(He.a,Object.assign({},this.props.layout,{name:"basic",initialValues:{remember:!0},onFinish:function(t){return e.onFinish(t)},onFinishFailed:function(){return e.onFinishFailed()}}),r.a.createElement(He.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]},r.a.createElement(L.a,{prefix:r.a.createElement(N.a,{className:"site-form-item-icon"})})),r.a.createElement(He.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]},r.a.createElement(L.a.Password,{prefix:r.a.createElement($t.a,{className:"site-form-item-icon"})})),r.a.createElement(He.a.Item,Object.assign({},this.tailLayout,{name:"remember",valuePropName:"checked"}),r.a.createElement(Zt.a,null,"\u8bb0\u4f4f\u6211")),r.a.createElement(He.a.Item,this.tailLayout,r.a.createElement(S.a,{loading:this.state.loading,type:"primary",htmlType:"submit"},"\u767b\u5f55")))))}}]),t}(r.a.Component),ta=H.a.confirm,aa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0,welcome:!1,login:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"ifUsed"}).then((function(t){console.log(t.data),0===t.data.status?e.setState({loading:!1,welcome:!0}):t.data.login?window.location.replace("/"):e.setState({loading:!1,welcome:!1})}))}},{key:"showConfirm",value:function(){this.setState({loading:!1,welcome:!1}),ta({title:"\u60a8\u5c1a\u672a\u6ce8\u518c\u4efb\u4f55\u7528\u6237\u6216\u7ed1\u5b9a\u4efb\u4f55\u670d\u52a1\u5668",icon:r.a.createElement(Xt.a,null),content:"\u662f\u5426\u9700\u8981\u8fdb\u5165\u5f15\u5bfc\u754c\u9762\u8fdb\u884c\u6ce8\u518c\u7ed1\u5b9a\uff1f",onOk:function(){window.location.replace("/welcome")},onCancel:function(){}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.welcome;return a?r.a.createElement("div",{align:"center",style:{marginTop:"20%"}},r.a.createElement(c.a,{size:"large"})):n?(this.showConfirm(),r.a.createElement("div",null)):r.a.createElement("div",{style:{background:"linear-gradient( rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.7) ),url(/static/img/1.jpg)",backgroundSize:"100% 100%",height:"100%",width:"100%"}},r.a.createElement("div",{style:{height:"300px"}},"aaa"),r.a.createElement(g.a,{align:"middle",justify:"space-between"},r.a.createElement(_.a,{span:1}),r.a.createElement(_.a,null,r.a.createElement(Qt.a,{icon:r.a.createElement(G.a,null),title:r.a.createElement("div",{style:{color:"white"}},"\u6b22\u8fce\u6765\u5230Docker\u5bb9\u5668\u53ef\u89c6\u5316\u7ba1\u7406\u5e73\u53f0")})),r.a.createElement(_.a,{span:4}),r.a.createElement(_.a,null,r.a.createElement(ea,{Login:function(){return e.props.Login()}})),r.a.createElement(_.a,{span:1})))}}]),t}(r.a.Component),na=(a(569),x.a.SubMenu),ra=w.a.Sider;function la(e){return r.a.createElement("div",null,r.a.createElement(ia,e))}var ia=function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(ra,{width:200,className:"site-layout-background"},r.a.createElement(x.a,{mode:"inline",defaultSelectedKeys:this.props.selectOptins,defaultOpenKeys:["sub1"],style:{height:"100%",borderRight:0}},r.a.createElement(x.a.Item,{key:"back"},r.a.createElement(le.a,{style:{fontSize:"21px"}}),r.a.createElement(E.b,{to:"/"},"\u56de\u5230\u4e3b\u9875")),r.a.createElement(na,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(N.a,{style:{fontSize:"21px"}}),"\u7528\u6237\u7ba1\u7406")},r.a.createElement(x.a.Item,{key:"1"},r.a.createElement(E.b,{to:this.props.url},"\u7528\u6237\u5217\u8868")),r.a.createElement(x.a.Item,{key:"2"},r.a.createElement(E.b,{to:"".concat(this.props.url,"/creat")},"\u521b\u5efa\u65b0\u7528\u6237")),r.a.createElement(x.a.Item,{key:"3"},r.a.createElement(E.b,{to:"".concat(this.props.url,"/change")},"\u4fee\u6539\u7528\u6237\u4fe1\u606f")))))}}]),t}(r.a.Component),ca=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"delete_user",value:function(){var e=Object(U.a)(V.a.mark((function e(){var t,a,n=this;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({loading:!0}),t=V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api",{api:"user_delete",user_id:n.props.selected[t]}).then((function(e){console.log(e.data),0===e.data.status?A.a.open({message:"\u5220\u9664\u6210\u529f\uff01",description:"\u7528\u6237:".concat(n.props.selected[t]," \u5220\u9664\u6210\u529f\uff01"),icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}):1===e.data.status?A.a.open({message:"\u5220\u9664\u5931\u8d25\uff01",description:"\u4f60\u4e0d\u80fd\u5220\u9664\u81ea\u5df1\u7684\u8d26\u6237",icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})}):-1===e.data.status&&A.a.open({message:"\u5220\u9664\u5931\u8d25\uff01",description:"\u8be5\u7528\u6237\u4e0d\u5b58\u5728",icon:r.a.createElement(G.a,{style:{color:"#108ee9"}})})}));case 2:case"end":return e.stop()}}),e)})),a=0;case 3:if(!(a<this.props.selected.length)){e.next=8;break}return e.delegateYield(t(a),"t0",5);case 5:a++,e.next=3;break;case 8:this.setState({loading:!1}),this.props.onFresh();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading;return r.a.createElement($.a,{disabled:this.props.disabled,placement:"top",title:"\u8be5\u64cd\u4f5c\u65e0\u6cd5\u64a4\u9500\uff0c\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e9b\u7528\u6237\u5417",onConfirm:function(){return e.delete_user()},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},r.a.createElement(S.a,{type:"primary",shape:"round",icon:r.a.createElement(ee.a,null),danger:!0,disabled:this.props.disabled,loading:t},"\u5220\u9664\u6240\u9009\u7528\u6237"))}}]),t}(r.a.Component);function sa(e){return r.a.createElement("div",null,r.a.createElement(oa,e))}var oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.state={data:[],loading:!0,selectedRowKeys:[]},a.columns=[{title:"ID",key:"id",ellipsis:!0,render:function(e,t){return t.id}},{title:"\u540d\u5b57",key:"name",render:function(e,t){return t.username}},{title:"\u8eab\u4efd",key:"type",render:function(e,t){return"100"===t.ifadmin?r.a.createElement(D.a,{color:"red"},"\u7ba1\u7406\u5458"):r.a.createElement(D.a,{color:"geekblue"},"\u666e\u901a\u7528\u6237")}}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"user_info"}).then((function(t){console.log(t.data.data),e.setState({data:t.data.data,loading:!1})}))}},{key:"handleRefresh",value:function(){this.fetch(),this.setState({selectedRowKeys:[]})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.loading,l=t.selectedRowKeys,i={selectedRowKeys:l,onChange:this.onSelectChange},c=l.length>0;return r.a.createElement("div",null,r.a.createElement(P.a,{title:"\u7528\u6237\u4e00\u89c8"},r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(ca,{disabled:!c,server_id:this.props.server_id,url:this.props.url,selected:l,onFresh:function(){return e.handleRefresh()}})),r.a.createElement(R.a,{loading:n,rowSelection:i,rowKey:function(e){return e.id},columns:this.columns,dataSource:a,size:"middle"})))}}]),t}(r.a.Component),ua=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"send_regist",value:function(e){var t=this;this.setState({loading:!0}),v.a.post("/api",Object(Le.a)({api:"create_user"},e)).then((function(e){console.log(e.data),0===e.data.status?window.location.replace("/user"):C.a.info("\u7528\u6237\u540d\u91cd\u590d\uff0c\u8bf7\u91cd\u65b0\u8bbe\u7f6e\uff01"),t.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t={wrapperCol:{offset:8,span:16}},a=this.state.loading;return r.a.createElement("div",null,r.a.createElement(fe.a,{title:"\u7528\u6237\u521b\u5efa",subTitle:"\u521b\u5efa\u65b0\u7528\u6237"}),r.a.createElement(He.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:8}},{name:"basic",onFinish:function(t){return e.send_regist(t)}}),r.a.createElement(He.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d"}]},r.a.createElement(L.a,null)),r.a.createElement(He.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(L.a.Password,null)),r.a.createElement(He.a.Item,{name:"confirm",label:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u4f60\u7684\u5bc6\u7801"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d"):Promise.resolve()}}}]},r.a.createElement(L.a.Password,null)),r.a.createElement(He.a.Item,Object.assign({},t,{name:"ifadmin",valuePropName:"checked"}),r.a.createElement(Zt.a,null,"\u662f\u5426\u8bbe\u7f6e\u4e3a\u7ba1\u7406\u5458")),r.a.createElement(He.a.Item,t,r.a.createElement(S.a,{loading:a,type:"primary",htmlType:"submit"},"\u521b\u5efa"))))}}]),t}(r.a.Component),ma=a(610),da=Ye.a.Option;function pa(e){return r.a.createElement(ha,e)}var ha=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={data:[],value:"",loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"fetch_search",value:function(e){var t=this;console.log(e),""!==e&&v.a.post("/api",{api:"search_user_by_name",input:e}).then((function(e){console.log(e.data),t.setState({data:e.data.data})}))}},{key:"send_regist",value:function(e){var t=this;this.setState({loading:!0});var a=this.state.value;if(""===a)return C.a.error("\u60a8\u6ca1\u6709\u9009\u62e9\u8981\u4fee\u6539\u7684\u7528\u6237"),void this.setState({loading:!1});v.a.post("/api",Object(Le.a)({api:"change_user"},e,{id:a})).then((function(e){console.log(e.data),0===e.data.status?window.location.replace("/user"):C.a.info("\u7528\u6237\u540d\u91cd\u590d\uff0c\u8bf7\u91cd\u65b0\u8bbe\u7f6e\uff01"),t.setState({loading:!1})}))}},{key:"handleChange",value:function(e){console.log(e),this.setState({value:e})}},{key:"render",value:function(){var e=this,t={wrapperCol:{offset:8,span:16}},a=this.state.data.map((function(e){return r.a.createElement(da,{key:e.id},e.name)})),n=this.state,l=n.value,i=n.loading;return r.a.createElement("div",null,r.a.createElement(fe.a,{title:"\u7528\u6237\u4fe1\u606f\u4fee\u6539",subTitle:"\u4fee\u6539\u7528\u6237\u4fe1\u606f"}),r.a.createElement(g.a,null,r.a.createElement(_.a,{span:4},r.a.createElement("div",{style:{fontSize:15}},"\u8bf7\u8f93\u5165\u9700\u8981\u4fee\u6539\u7684\u7528\u6237\u540d:")),r.a.createElement(_.a,{span:20},r.a.createElement(Ye.a,{suffixIcon:r.a.createElement(ma.a,null),style:{width:200},showSearch:!0,value:l,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:function(t){return e.fetch_search(t)},onChange:function(t){return e.handleChange(t)},notFoundContent:null},a))),r.a.createElement(y.a,{orientation:"left"},"\u4e0d\u4fee\u6539\u7684\u90e8\u5206\u8bf7\u7559\u7a7a"),r.a.createElement(He.a,{style:{width:"300px"},name:"basic",onFinish:function(t){return e.send_regist(t)}},r.a.createElement(He.a.Item,{label:"\u7528\u6237\u540d",name:"username"},r.a.createElement(L.a,null)),r.a.createElement(He.a.Item,{label:"\u5bc6\u7801",name:"password"},r.a.createElement(L.a.Password,null)),r.a.createElement(He.a.Item,{name:"confirm",label:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",dependencies:["password"],hasFeedback:!0,rules:[function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d"):Promise.resolve()}}}]},r.a.createElement(L.a.Password,null)),r.a.createElement(He.a.Item,Object.assign({},t,{name:"ifadmin",valuePropName:"checked"}),r.a.createElement(Zt.a,null,"\u662f\u5426\u8bbe\u7f6e\u4e3a\u7ba1\u7406\u5458")),r.a.createElement(He.a.Item,t,r.a.createElement(S.a,{loading:i,type:"primary",htmlType:"submit"},"\u4fee\u6539"))))}}]),t}(r.a.Component),va=w.a.Content;function Ea(){var e=Object(f.h)().url;return r.a.createElement(w.a,null,r.a.createElement(T,{number:"2"}),r.a.createElement(w.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"".concat(e)},r.a.createElement(la,{selectOptins:"1",url:e})),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/creat")},r.a.createElement(la,{selectOptins:"2",url:e})),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/change")},r.a.createElement(la,{selectOptins:"3",url:e}))),r.a.createElement(w.a,{style:{padding:"0 24px 24px"}},r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"".concat(e)},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u7528\u6237\u4e00\u89c8")),r.a.createElement(va,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(sa,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/creat")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u7528\u6237\u521b\u5efa")),r.a.createElement(va,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(ua,null))),r.a.createElement(f.b,{exact:!0,path:"".concat(e,"/change")},r.a.createElement(k.a,{style:{margin:"16px 0"}},r.a.createElement(k.a.Item,null,"\u4fee\u6539\u7528\u6237\u4fe1\u606f")),r.a.createElement(va,{className:"site-layout-background",style:{padding:24,margin:0,minHeight:280}},r.a.createElement(pa,null)))))))}a(570);var fa=a(227);function ga(e){return r.a.createElement(Qt.a,{icon:r.a.createElement(G.a,null),title:"\u6b22\u8fce\u6765\u5230Docker\u53ef\u89c6\u5316\u7ba1\u7406\u5e73\u53f0",extra:r.a.createElement(S.a,{type:"primary",onClick:function(){return e.onNext()}},"\u4e0b\u4e00\u6b65")})}var _a=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0,ifUser:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"send_regist",value:function(e){var t=this;this.setState({loading:!0}),v.a.post("/welcome_api",Object(Le.a)({api:"create_user"},e)).then((function(e){console.log(e.data),0===e.data.status?t.props.onNext():(C.a.info("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),t.setState({loading:!1}))})).catch((function(e){console.log(e),C.a.error("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),t.setState({loading:!1})}))}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/welcome_api",{aaa:"aaa"}).then((function(t){console.log(t.data),-2===t.data.status?e.setState({loading:!1,ifUser:!0}):e.setState({loading:!1,ifUser:!1})})).catch((function(t){console.log(t),C.a.error("\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:8}},a=this.state,n=a.loading,l=a.ifUser;return n?r.a.createElement("div",{align:"center",style:{marginTop:"20%"}},r.a.createElement(c.a,{size:"large"})):l?r.a.createElement(Qt.a,{icon:r.a.createElement(G.a,null),title:"\u8be5\u670d\u52a1\u5668\u5df2\u7ecf\u521b\u5efa\u4e86\u7ba1\u7406\u5458\u8d26\u6237\uff0c\u8bf7\u767b\u5f55\u8fdb\u884c\u64cd\u4f5c",extra:r.a.createElement(g.a,null,r.a.createElement(_.a,{span:8}),r.a.createElement(_.a,{span:4},r.a.createElement(ea,Object.assign({},t,{Login:function(){return e.props.onNext()}}))))}):r.a.createElement(Qt.a,{icon:r.a.createElement(G.a,null),title:"\u8bf7\u6ce8\u518c\u4e00\u4e2a\u7ba1\u7406\u5458\u7528\u6237",extra:r.a.createElement(He.a,Object.assign({},t,{name:"basic",onFinish:function(t){return e.send_regist(t)}}),r.a.createElement(He.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d"}]},r.a.createElement(L.a,null)),r.a.createElement(He.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(L.a.Password,null)),r.a.createElement(He.a.Item,{name:"confirm",label:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u4f60\u7684\u5bc6\u7801"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d"):Promise.resolve()}}}]},r.a.createElement(L.a.Password,null)),r.a.createElement(He.a.Item,{wrapperCol:{offset:8,span:16}},r.a.createElement(S.a,{loading:n,type:"primary",htmlType:"submit"},"\u4e0b\u4e00\u6b65")))})}}]),t}(r.a.Component);function ba(e){return r.a.createElement(_a,{onNext:function(){return e.onNext()}})}function ya(e){return r.a.createElement(ka,{onNext:function(){return e.onNext()}})}var ka=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleInput_server_sship=function(e){a.setState({input_server_ssh_ip:e.target.value})},a.state={server_ip_input:"",server_name_input:"",server_type_input:"http",server_user_input:"root",server_psw_input:"",input_server_ssh_ip:"",loading:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleServer_ip_input",value:function(e){this.setState({server_ip_input:e.target.value})}},{key:"handleServer_name_input",value:function(e){this.setState({server_name_input:e.target.value})}},{key:"handleServer_type_input",value:function(e){this.setState({server_type_input:e.target.value})}},{key:"handleServer_user_input",value:function(e){this.setState({server_user_input:e.target.value})}},{key:"handleServer_psw_input",value:function(e){this.setState({server_psw_input:e.target.value})}},{key:"send_args",value:function(){var e=this;this.setState({loading:!0});var t=this.state,a=t.server_ip_input,n=t.server_name_input,r=t.server_type_input,l=t.server_user_input,i=t.server_psw_input,c=t.input_server_ssh_ip;v.a.post("/api",{api:"create_server",server_ip:a,server_name:n,server_type:r,server_user:l,server_psw:i,server_ssh_ip:c}).then((function(t){console.log(t.data),0===t.data.status?e.props.onNext():(C.a.info(t.data.message),e.setState({loading:!1}))})).catch((function(t){console.log(t),C.a.error("\u4e0e\u63a7\u5236\u8282\u70b9\u914d\u5bf9\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u8f93\u5165\u662f\u5426\u6b63\u786e\uff0c"),e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.server_ip_input,n=t.server_name_input,l=t.server_type_input,i=t.server_user_input,c=t.server_psw_input,s=t.loading,o=t.input_server_ssh_ip;return r.a.createElement(Qt.a,{icon:r.a.createElement(q.a,null),title:"\u8bf7\u7ed1\u5b9a\u60a8\u7b2c\u4e00\u53f0\u670d\u52a1\u5668\u8282\u70b9",extra:r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement(P.a,{title:"\u8bf7\u8f93\u5165\u670d\u52a1\u5668\u4fe1\u606f",bordered:!1,style:{width:500}},r.a.createElement(L.a.Group,null,"\u670d\u52a1\u5668ip\u6216\u57df\u540d:",r.a.createElement(L.a,{onChange:function(t){return e.handleServer_ip_input(t)},value:a,style:{width:300,marginLeft:10},prefix:r.a.createElement(J.a,null),placeholder:"127.0.0.1"}),r.a.createElement("br",null),r.a.createElement("br",null),"\u670d\u52a1\u5668\u540d\u5b57:",r.a.createElement(L.a,{onChange:function(t){return e.handleServer_name_input(t)},value:n,style:{width:290,marginLeft:5},prefix:r.a.createElement(W.a,null),placeholder:"lalala"})),r.a.createElement("br",null),"\u8fde\u63a5\u7c7b\u578b:",r.a.createElement(M.a.Group,{onChange:function(t){return e.handleServer_type_input(t)},defaultValue:l,buttonStyle:"solid"},r.a.createElement(M.a.Button,{value:"http"},"HTTP"),r.a.createElement(M.a.Button,{value:"https"},"HTTPS")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(L.a.Group,null,"ssh\u670d\u52a1IP:",r.a.createElement(L.a,{onChange:function(t){return e.handleInput_server_sship(t)},value:o,style:{width:280,marginLeft:10},prefix:r.a.createElement(q.a,null),placeholder:"127.0.0.1:22"}),r.a.createElement("br",null),r.a.createElement("br",null),"\u670d\u52a1\u5668\u7528\u6237\u540d:",r.a.createElement(L.a,{onChange:function(t){return e.handleServer_user_input(t)},value:i,style:{width:280,marginLeft:10},prefix:r.a.createElement(Q.a,null),placeholder:"root"}),r.a.createElement("br",null),r.a.createElement("br",null),"\u670d\u52a1\u5668\u5bc6\u7801:",r.a.createElement(L.a,{onChange:function(t){return e.handleServer_psw_input(t)},value:c,style:{width:300,marginLeft:5},prefix:r.a.createElement(X.a,null),placeholder:"******"}))),r.a.createElement(S.a,{loading:s,onClick:function(){return e.send_args()},type:"primary"},"\u4e0b\u4e00\u6b65")))})}}]),t}(r.a.Component);function wa(e){return r.a.createElement(Qt.a,{status:"success",title:"\u4e00\u5207\u51c6\u5907\u5c31\u7eea",subTitle:"\u73b0\u5728\u60a8\u53ef\u4ee5\u5c3d\u60c5\u4f7f\u7528\u4e86",extra:[r.a.createElement(E.b,{to:"/"},r.a.createElement(S.a,{type:"primary",key:"console"},"\u8fdb\u5165\u5e73\u53f0"))]})}var Oa=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={current:0,welcome:!1},a.steps=[{title:"\u5f00\u59cb",content:ga},{title:"\u6ce8\u518c",content:ba},{title:"\u7ed1\u5b9a\u4e00\u4e2a\u670d\u52a1\u5668",content:ya},{title:"\u7ed3\u675f",content:wa}],a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"next",value:function(){var e=this.state.current+1;this.setState({current:e})}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(){var e=this;v.a.post("/api",{api:"ifUsed"}).then((function(t){console.log(t.data),0===t.data.status?e.setState({welcome:!0}):(e.setState({welcome:!1}),window.location.replace("/"))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.welcome,l=fa.a.Step;return n?r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(g.a,{gutter:[8,8]},r.a.createElement(_.a,{span:3}),r.a.createElement(_.a,{span:18},r.a.createElement(fa.a,{current:a},this.steps.map((function(e){return r.a.createElement(l,{key:e.title,title:e.title})}))),r.a.createElement("div",{className:"steps-content"},this.steps[a].content({onNext:function(){return e.next()}}))),r.a.createElement(_.a,{span:3}))):r.a.createElement("div",{align:"center",style:{marginTop:"20%"}},r.a.createElement(c.a,{size:"large"}))}}]),t}(r.a.Component),ja=(a(572),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={isAuthenticated:!1,isSend:!1},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.post("/api",{api:"check_login"}).then((function(t){e.setState({isSend:!0,isAuthenticated:t.data.isLogin})}))}},{key:"authenticate",value:function(){this.setState({isAuthenticated:!0,isSend:!0}),window.location.replace("/")}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAuthenticated,n=t.isSend;return r.a.createElement(E.a,null,r.a.createElement(Sa,{path:"/control",isAuthenticated:a,isSend:n},r.a.createElement(qt,null)),r.a.createElement(Sa,{path:"/user",isAuthenticated:a,isSend:n},r.a.createElement(Ea,null)),r.a.createElement(Sa,{exact:!0,path:"/",isAuthenticated:a,isSend:n},r.a.createElement(re,null)),r.a.createElement(f.b,{path:"/login"},r.a.createElement(aa,{Login:function(){return e.authenticate()}})),r.a.createElement(f.b,{path:"/welcome"},r.a.createElement(Oa,null)))}}]),t}(r.a.Component));function Sa(e){var t=e.children,a=Object(s.a)(e,["children"]);return console.log(a.isSend),r.a.createElement(f.b,Object.assign({},a,{render:function(e){var n=e.location;return a.isSend?a.isAuthenticated?t:r.a.createElement(f.a,{to:{pathname:"/login",state:{from:n}}}):r.a.createElement("div",{align:"center",style:{marginTop:"20%"}},r.a.createElement(c.a,{size:"large"}))}}))}i.a.render(r.a.createElement(ja,null),document.getElementById("root"))}},[[303,1,2]]]);
//# sourceMappingURL=main.edc29982.chunk.js.map